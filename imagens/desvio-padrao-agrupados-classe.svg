<?xml version="1.0" encoding="UTF-8"?>
<!-- ===========================================
   DESVIO-PADRÃO (σ) — DADOS AGRUPADOS EM CLASSES

   Classes: [0,10) [10,20) [20,30)
   f: 2, 5, 3   →  N = 10
   Pontos médios c: 5, 15, 25

   Média (por pontos médios):
     x̄ = (Σ c_j f_j)/N = (5·2 + 15·5 + 25·3)/10 = 160/10 = 16
   Variância (pop., por pontos médios):
     σ² = (1/N) Σ f_j (c_j − x̄)²
        = (1/10)[2·(−11)² + 5·(−1)² + 3·(+9)²]
        = (1/10)(242 + 5 + 243) = 49
   Desvio-padrão:
     σ = √49 = 7
   Pontos no eixo:
     x̄−σ = 9   e   x̄+σ = 23

   Animação:
   - barras crescem
   - linha da média se desenha
   - braços de σ surgem acima e duram ~3s antes de reiniciar
   =========================================== -->
<svg viewBox="0 0 1500 780" xmlns="http://www.w3.org/2000/svg"
     role="img" aria-labelledby="title desc">
  <title id="title">Desvio-padrão em dados agrupados em classes</title>
  <desc id="desc">
    À esquerda, tabela com classes, frequências e pontos médios (N=10).
    À direita, histograma por classes, com a linha vertical da média (por pontos médios)
    e uma linha tracejada que surge do centro para as laterais representando o desvio-padrão σ,
    marcando x̄−σ e x̄+σ.
  </desc>

  <rect x="0" y="0" width="100%" height="100%" fill="#ffffff"/>

  <defs>
    <style>
      :root{
        --ink:#111827;
        --ink-soft:#64748b;
        --grid:#e5e7eb;
        --font:"et-book","ETBook","Georgia",serif;
        --cycle:8s;
        --ease:ease-in-out;
      }

      text{
        font-family:var(--font);
        fill:var(--ink);
        user-select:none;
      }

      .u-stroke{
        stroke:var(--ink);
        fill:none;
        stroke-linecap:round;
        stroke-linejoin:round;
      }

      .u-panel{ stroke-width:2; rx:12; }

      .label{
        font-size:32px;
        font-weight:600;
        text-anchor:middle;
      }

      .u-small{ font-size:18px; }
      .tiny{ font-size:15px; }

      .subscript{
        font-size:0.7em;
        font-weight:600;
        baseline-shift:-0.3em;
      }

      /* ====== Varredura das linhas da tabela ====== */
      @keyframes rowHi{
        0%,10%{opacity:0}
        15%,25%{opacity:.18}
        30%,100%{opacity:0}
      }
      .row-hi{ fill:var(--ink); opacity:0 }
      .r1{ animation:rowHi var(--cycle) var(--ease) infinite 0s }
      .r2{ animation:rowHi var(--cycle) var(--ease) infinite .7s }
      .r3{ animation:rowHi var(--cycle) var(--ease) infinite 1.4s }
      .r4{ animation:rowHi var(--cycle) var(--ease) infinite 2.1s }

      /* ====== Barras do histograma ====== */
      @keyframes grow{
        0%{ transform:scaleY(0) }
        18%,82%{ transform:scaleY(1) }
        100%{ transform:scaleY(0) }
      }
      .bar{
        fill:var(--ink);
        transform-box:fill-box;
        transform-origin:bottom;
        transform:scaleY(0);
      }
      .b1{ animation:grow var(--cycle) var(--ease) infinite 0s }
      .b2{ animation:grow var(--cycle) var(--ease) infinite .15s }
      .b3{ animation:grow var(--cycle) var(--ease) infinite .30s }

      /* ====== Linha vertical da média ====== */
      .u-mean-line{
        stroke-width:4.0;
        stroke-dasharray:520;
        stroke-dashoffset:520;
        opacity:.95;
        animation:meanLine var(--cycle) var(--ease) infinite;
      }
      @keyframes meanLine{
        0%{ stroke-dashoffset:520; opacity:0 }
        20%,72%{ stroke-dashoffset:0; opacity:1 }
        86%,100%{ stroke-dashoffset:520; opacity:0 }
      }

      /* ====== σ (linha tracejada abrindo do centro) ====== */
      .u-sig-halo{
        stroke:#fff;
        stroke-width:10;
        opacity:0;
        animation:sigHalo var(--cycle) var(--ease) infinite;
      }
      .u-sig-line{
        stroke-width:4.2;
        stroke-dasharray:14 10;
        stroke-dashoffset:240;
        opacity:0;
        animation:sigDraw var(--cycle) var(--ease) infinite;
      }

      /* 34%–72% do ciclo de 8s = ~3,04s visível */
      @keyframes sigHalo{
        0%,24%{ opacity:0 }
        34%,72%{ opacity:.98 }
        86%,100%{ opacity:0 }
      }
      @keyframes sigDraw{
        0%{ opacity:0; stroke-dashoffset:240 }
        24%{ opacity:0; stroke-dashoffset:240 }
        34%{ opacity:1; stroke-dashoffset:0 }
        72%{ opacity:1; stroke-dashoffset:0 }
        86%{ opacity:0; stroke-dashoffset:240 }
        100%{ opacity:0; stroke-dashoffset:240 }
      }

      /* Halo no texto (sem caixas) */
      .text-halo{
        paint-order:stroke;
        stroke:#fff;
        stroke-width:6;
        stroke-linejoin:round;
      }

      .end-label{
        font-size:14px;
        font-weight:800;
        opacity:0;
        animation:txtOn var(--cycle) var(--ease) infinite;
      }
      .mean-label{
        font-size:16px;
        font-weight:900;
        text-anchor:middle;
        opacity:0;
        animation:txtOn var(--cycle) var(--ease) infinite;
      }
      .d-label{
        font-size:16px;
        font-weight:900;
        text-anchor:middle;
        opacity:0;
        animation:txtOn var(--cycle) var(--ease) infinite;
      }
      @keyframes txtOn{
        0%,28%{ opacity:0 }
        36%,72%{ opacity:1 }
        86%,100%{ opacity:0 }
      }

      @media (prefers-reduced-motion:reduce){
        .row-hi{ animation:none; opacity:.12 }
        .bar{ animation:none; transform:scaleY(1) }
        .u-mean-line{ animation:none; stroke-dashoffset:0; opacity:1 }
        .u-sig-halo{ animation:none; opacity:.98 }
        .u-sig-line{ animation:none; stroke-dashoffset:0; opacity:1 }
        .end-label,.mean-label,.d-label{ animation:none; opacity:1 }
      }
    </style>
  </defs>

  <!-- ================= PAINEL ESQUERDO: TABELA ================= -->
  <g id="panel-table" transform="translate(-140,-200) scale(1.2)">
    <g class="p-panel">
      <rect x="120" y="230" width="560" height="510" class="u-panel u-stroke"/>

      <g class="p-header">
        <text x="390" y="280" class="label">Desvio-padrão</text>
        <text x="390" y="308" class="u-small" text-anchor="middle">
          Dados agrupados em classes — N = 10
        </text>
      </g>

      <!-- Cabeçalho de 3 colunas (como na imagem): Classe | f | ponto médio -->
      <g class="p-body" transform="translate(8,15)">
        <line x1="160" y1="364" x2="620" y2="364" class="u-stroke" style="stroke-width:2"/>

        <g font-size="18" font-weight="600">
          <text x="220" y="352" text-anchor="middle">Classe</text>
          <text x="430" y="352" text-anchor="middle">
            Frequência f<tspan class="subscript">j</tspan>
          </text>
          <text x="595" y="352" text-anchor="middle">
            Ponto médio c<tspan class="subscript">j</tspan>
          </text>
        </g>

        <g class="u-stroke">
          <line x1="160" y1="404" x2="620" y2="404"/>
          <line x1="160" y1="444" x2="620" y2="444"/>
          <line x1="160" y1="484" x2="620" y2="484"/>
          <line x1="160" y1="524" x2="620" y2="524"/>
          <line x1="160" y1="564" x2="620" y2="564"/>
        </g>

        <rect x="160" y="374" width="460" height="30" class="row-hi r1"/>
        <rect x="160" y="414" width="460" height="30" class="row-hi r2"/>
        <rect x="160" y="454" width="460" height="30" class="row-hi r3"/>
        <rect x="160" y="494" width="460" height="30" class="row-hi r4"/>

        <!-- Dados da imagem -->
        <g font-size="19">
          <text x="175" y="396">[0, 10)</text>
          <text x="455" y="396" text-anchor="end">2</text>
          <text x="605" y="396" text-anchor="end">5</text>

          <text x="175" y="436">[10, 20)</text>
          <text x="455" y="436" text-anchor="end">5</text>
          <text x="605" y="436" text-anchor="end">15</text>

          <text x="175" y="476">[20, 30)</text>
          <text x="455" y="476" text-anchor="end">3</text>
          <text x="605" y="476" text-anchor="end">25</text>

          <text x="175" y="516" font-weight="700">Totais</text>
          <text x="455" y="516" text-anchor="end" font-weight="700">10</text>
          <text x="605" y="516" text-anchor="end" font-weight="700">—</text>
        </g>
      </g>

      <g class="p-footer" transform="translate(0,10)">
        <text x="390" y="655" class="u-small" text-anchor="middle">
          Média (aprox.): x̄ = (Σ c<tspan class="subscript">j</tspan> f<tspan class="subscript">j</tspan>)/N = 160/10 = 16.
        </text>
        <text x="390" y="680" class="u-small" text-anchor="middle">
          Variância (pop.): σ² = (1/N) Σ f<tspan class="subscript">j</tspan>(c<tspan class="subscript">j</tspan> − x̄)² = 490/10 = 49.
        </text>
        <text x="390" y="705" class="u-small" text-anchor="middle">
          Desvio-padrão: σ = √49 = 7  ⇒  x̄±σ = 9 e 23.
        </text>
      </g>
    </g>
  </g>

  <!-- ================= PAINEL DIREITO: HISTOGRAMA + σ ================= -->
  <g id="panel-hist" transform="translate(-220,-200) scale(1.2)">
    <g class="p-panel">
      <rect x="840" y="230" width="580" height="510" class="u-panel u-stroke"/>

      <g class="p-header">
        <text x="1128" y="280" class="label">Frequências e σ</text>
        <text x="1128" y="308" class="u-small" text-anchor="middle">
          Histograma por classes — x̄ e x̄ ± σ (por pontos médios)
        </text>
      </g>

      <g class="p-body" transform="translate(-85,-70) scale(1.1)">
        <!-- Eixos -->
        <g class="u-stroke" style="stroke-width:2.5">
          <line x1="890" y1="670" x2="1340" y2="670"/>
          <line x1="890" y1="670" x2="890" y2="450"/>
        </g>

        <!-- Grades Y (0..5) | altura 220 => 1 unid = 44px -->
        <g class="u-stroke u-small" opacity=".35" style="stroke-width:2">
          <line x1="890" y1="670" x2="1340" y2="670"/><text x="872" y="674" text-anchor="end" opacity=".85">0</text>
          <line x1="890" y1="626" x2="1340" y2="626"/><text x="872" y="630" text-anchor="end" opacity=".85">1</text>
          <line x1="890" y1="582" x2="1340" y2="582"/><text x="872" y="586" text-anchor="end" opacity=".85">2</text>
          <line x1="890" y1="538" x2="1340" y2="538"/><text x="872" y="542" text-anchor="end" opacity=".85">3</text>
          <line x1="890" y1="494" x2="1340" y2="494"/><text x="872" y="498" text-anchor="end" opacity=".85">4</text>
          <line x1="890" y1="450" x2="1340" y2="450"/><text x="872" y="454" text-anchor="end" opacity=".85">5</text>
        </g>

        <!-- Escala X: 0..30 em 450px  =>  15px por unidade
             Classes de largura 10 => 150px por barra.
             Pequenos gaps visuais (1px) para não "grudar" demais.
        -->
        <!-- f=2 => h=88;  y=670-88=582 -->
        <rect x="890.5"  y="582" width="149.0" height="88"  class="bar b1"/>  <!-- [0,10) -->
        <!-- f=5 => h=220; y=450 -->
        <rect x="1040.5" y="450" width="149.0" height="220" class="bar b2"/>  <!-- [10,20) -->
        <!-- f=3 => h=132; y=538 -->
        <rect x="1190.5" y="538" width="149.0" height="132" class="bar b3"/>  <!-- [20,30) -->

        <!-- Ticks (limites das classes): 0,10,20,30 -->
        <g class="u-stroke" style="stroke-width:2" opacity=".85">
          <line x1="890"  y1="670" x2="890"  y2="662"/>
          <line x1="1040" y1="670" x2="1040" y2="662"/>
          <line x1="1190" y1="670" x2="1190" y2="662"/>
          <line x1="1340" y1="670" x2="1340" y2="662"/>
        </g>

        <g class="u-small" font-weight="700">
          <text x="890"  y="695" text-anchor="middle">0</text>
          <text x="1040" y="695" text-anchor="middle">10</text>
          <text x="1190" y="695" text-anchor="middle">20</text>
          <text x="1340" y="695" text-anchor="middle">30</text>
        </g>

        <g class="u-small" font-weight="600">
          <text x="965"  y="720" text-anchor="middle">[0,10)</text>
          <text x="1115" y="720" text-anchor="middle">[10,20)</text>
          <text x="1265" y="720" text-anchor="middle">[20,30)</text>
        </g>

        <!-- ================= x̄ e x̄±σ na escala 0..30 =================
             Mapeamento: X(v) = 890 + 15·v
             x̄ = 16  → X = 1130
             x̄−σ = 9 → X = 1025
             x̄+σ = 23→ X = 1235
        -->
        <line x1="1130" y1="360" x2="1130" y2="670" class="u-mean-line u-stroke"/>

        <!-- σ acima do topo (topo do gráfico é y=450). Colocamos em y=410 -->
        <line x1="1130" y1="410" x2="1025" y2="410" class="u-sig-halo u-stroke"/>
        <line x1="1130" y1="410" x2="1025" y2="410" class="u-sig-line u-stroke"/>

        <line x1="1130" y1="410" x2="1235" y2="410" class="u-sig-halo u-stroke"/>
        <line x1="1130" y1="410" x2="1235" y2="410" class="u-sig-line u-stroke"/>

        <!-- Caps dos extremos -->
        <g class="u-stroke" style="stroke-width:3.2">
          <line x1="1025" y1="396" x2="1025" y2="424" opacity=".95"/>
          <line x1="1235" y1="396" x2="1235" y2="424" opacity=".95"/>
        </g>

        <!-- Labels -->
        <text x="1008" y="415" class="end-label text-halo" text-anchor="end">x̄ − σ = 9</text>
        <text x="1252" y="415" class="end-label text-halo" text-anchor="start">x̄ + σ = 23</text>

        <text x="1130" y="372" class="mean-label text-halo">x̄ = 16</text>

        <text x="1077.5" y="436" class="d-label text-halo">−7</text>
        <text x="1182.5" y="436" class="d-label text-halo">+7</text>

      </g>
    </g>
  </g>
</svg>
