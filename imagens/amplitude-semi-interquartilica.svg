<?xml version="1.0" encoding="UTF-8"?>
<!-- =========================================================
   AMPLITUDE SEMI-INTERQUARTÍLICA (SEMI-AIQ)
   x = {15, 18, 20, 22, 23, 24, 25, 35} (ordenados) | n=8
   Q1 = (x2+x3)/2 = 19
   Q3 = (x6+x7)/2 = 24,5
   AIQ = Q3 − Q1 = 5,5
   Semi-AIQ = (Q3 − Q1)/2 = 2,75
   Escala: 15..35
   CSS-only | paleta padrão | + TEMP: fundo branco (.tmp-bg)
   ========================================================= -->
<svg viewBox="0 0 1550 744" xmlns="http://www.w3.org/2000/svg"
     role="img" aria-labelledby="title desc">
  <title id="title">Amplitude semi-interquartílica: (Q3 − Q1)/2</title>
  <desc id="desc">
    Observações em uma reta numérica. Aparecem Q1 e Q3, a faixa dos 50% centrais
    e o ponto médio dessa faixa. A amplitude semi-interquartílica é metade da
    amplitude interquartílica: (Q3 − Q1)/2.
  </desc>

  <!-- TEMP: fundo branco (remover depois) -->
  <rect class="tmp-bg" x="0" y="0" width="100%" height="100%"/>

  <defs>
    <style>
      :root{
        --ink:#111827;
        --ink-soft:#64748b;
        --grid:#e5e7eb;
        --accent:#64748b;
        --font:"et-book","ETBook","Georgia",serif;
        --cycle:7.8s;
        --ease:ease-in-out;
      }

      /* TEMP */
      .tmp-bg{ fill:#fff; }

      text{ font-family:var(--font); fill:var(--ink); user-select:none; }

      .u-stroke{
        stroke:var(--ink);
        fill:none;
        stroke-linecap:round;
        stroke-linejoin:round;
      }
      .u-panel{ stroke-width:2; rx:22; ry:22; }

      .label{ font-size:46px; font-weight:600; text-anchor:middle; }
      .small{ font-size:30px; text-anchor:middle; fill:var(--ink-soft); }

      .axis{ stroke-width:2; }
      .grid{ stroke:var(--grid); stroke-width:1; stroke-dasharray:6 8; }

      .tick-label{ font-size:22px; fill:var(--ink-soft); }

      .dot{ fill:var(--ink); opacity:.92; }
      .outerFade{ opacity:.92; }

      .qline{
        stroke:var(--accent);
        stroke-width:4;
        opacity:0;
      }
      .q1{ stroke-dasharray:10 10; }
      .q3{ stroke-dasharray:2 10; }

      .qlab{
        font-size:28px;
        font-weight:800;
        fill:var(--ink);
        opacity:0;
      }
      .qlab .sub{ font-size:18px; baseline-shift:sub; }
      .qlab .val{ font-size:22px; fill:var(--ink-soft); font-weight:700; }

      .band{ fill:var(--accent); opacity:0; }
      .band-text{
        font-size:22px;
        font-weight:800;
        fill:var(--ink);
        opacity:0;
        text-anchor:middle;
      }
      .band-text .soft{ fill:var(--ink-soft); font-weight:700; }

      /* linha e rótulo do meio da faixa */
      .midline{
        stroke:var(--grid);
        stroke-width:3;
        opacity:0;
      }
      .midlab{
        font-size:20px;
        font-weight:800;
        fill:var(--ink-soft);
        opacity:0;
        text-anchor:middle;
      }

      /* semi-AIQ (meio segmento) */
      .half-line{
        stroke:var(--ink);
        stroke-width:3.2;
        stroke-dasharray:240;
        stroke-dashoffset:240;
        opacity:.95;
      }
      .cap{
        stroke:var(--ink);
        stroke-width:3.2;
        opacity:0;
      }
      .half-label{
        font-size:26px;
        font-weight:900;
        text-anchor:middle;
        opacity:0;
      }
      .half-formula{
        font-size:22px;
        font-weight:800;
        fill:var(--ink-soft);
        text-anchor:middle;
        opacity:0;
      }

      /* ===================== ANIMAÇÕES ===================== */
      .a-dots{
        transform-box:fill-box;
        transform-origin:50% 50%;
        animation:dotsIn var(--cycle) var(--ease) infinite;
      }
      @keyframes dotsIn{
        0%,10%{ opacity:0; transform:scale(.985); }
        18%,100%{ opacity:1; transform:scale(1); }
      }

      .a-q1{ animation:q1On var(--cycle) var(--ease) infinite; }
      .a-q3{ animation:q3On var(--cycle) var(--ease) infinite; }
      @keyframes q1On{ 0%,24%{opacity:0} 34%,100%{opacity:1} }
      @keyframes q3On{ 0%,30%{opacity:0} 40%,100%{opacity:1} }

      .a-q1t{ animation:q1T var(--cycle) var(--ease) infinite; }
      .a-q3t{ animation:q3T var(--cycle) var(--ease) infinite; }
      @keyframes q1T{ 0%,26%{opacity:0} 36%,100%{opacity:1} }
      @keyframes q3T{ 0%,32%{opacity:0} 42%,100%{opacity:1} }

      .a-band{ animation:bandOn var(--cycle) var(--ease) infinite; }
      @keyframes bandOn{ 0%,40%{opacity:0} 50%,80%{opacity:.16} 100%{opacity:.13} }

      .a-bandText{ animation:bandTextOn var(--cycle) var(--ease) infinite; }
      @keyframes bandTextOn{
        0%,46%{opacity:0; transform:translateY(6px);}
        56%,80%{opacity:1; transform:translateY(0px);}
        100%{opacity:0;}
      }

      .a-mid{ animation:midOn var(--cycle) var(--ease) infinite; }
      @keyframes midOn{
        0%,52%{opacity:0}
        62%,80%{opacity:1}
        100%{opacity:0}
      }

      .a-half{ animation:halfOn var(--cycle) var(--ease) infinite; }
      @keyframes halfOn{
        0%{ stroke-dashoffset:240; opacity:0 }
        62%,80%{ stroke-dashoffset:0; opacity:1 }
        92%,100%{ stroke-dashoffset:240; opacity:0 }
      }

      .a-cap{ animation:capOn var(--cycle) var(--ease) infinite; }
      @keyframes capOn{
        0%,62%{opacity:0}
        68%,80%{opacity:1}
        92%,100%{opacity:0}
      }

      .a-hlabel{ animation:hLabelOn var(--cycle) var(--ease) infinite; }
      @keyframes hLabelOn{
        0%,64%{opacity:0; transform:translateY(6px);}
        74%,80%{opacity:1; transform:translateY(0px);}
        92%,100%{opacity:0; transform:translateY(6px);}
      }

      /* puxa atenção para o miolo quando a faixa aparece */
      .outerFade{ animation:outerFade var(--cycle) var(--ease) infinite; }
      @keyframes outerFade{
        0%,46%{ opacity:.92; }
        56%,100%{ opacity:.40; }
      }

      @media (prefers-reduced-motion:reduce){
        .a-dots,.a-q1,.a-q3,.a-q1t,.a-q3t,.a-band,.a-bandText,.a-mid,.a-half,.a-cap,.a-hlabel,.outerFade{
          animation:none;
        }
        .qline,.qlab{ opacity:1; }
        .band{ opacity:.14; }
        .band-text,.midlab{ opacity:1; transform:none; }
        .midline{ opacity:1; }
        .half-line{ stroke-dashoffset:0; opacity:1; }
        .cap,.half-label,.half-formula{ opacity:1; transform:none; }
      }
    </style>
  </defs>

  <g transform="translate(85,92)">
    <rect x="0" y="0" width="1380" height="560" class="u-panel u-stroke"/>

    <text x="690" y="58" class="label">Amplitude semi-interquartílica</text>
    <text x="690" y="96" class="small">Metade da amplitude interquartílica: (Q<tspan baseline-shift="sub" font-size="20">3</tspan> − Q<tspan baseline-shift="sub" font-size="20">1</tspan>)/2</text>

    <g transform="translate(110,150)">
      <!-- grade -->
      <g class="grid">
        <line x1="0" y1="150" x2="1160" y2="150"/>
        <line x1="0" y1="210" x2="1160" y2="210"/>
        <line x1="0" y1="90"  x2="1160" y2="90"/>
      </g>

      <!-- eixo -->
      <g class="u-stroke axis">
        <line x1="0" y1="150" x2="1160" y2="150"/>
      </g>

      <!-- ticks (mín=15, máx=35) -->
      <g class="u-stroke" style="stroke-width:2">
        <line x1="0"    y1="140" x2="0"    y2="160"/>
        <line x1="1160" y1="140" x2="1160" y2="160"/>
      </g>
      <g class="tick-label" font-weight="800">
        <text x="0" y="190" text-anchor="middle">15</text>
        <text x="1160" y="190" text-anchor="middle">35</text>
      </g>

      <!-- faixa IQR (Q1=19 → x=232 | Q3=24,5 → x=551) -->
      <rect class="band a-band" x="232" y="120" width="319" height="60"/>

      <!-- texto da faixa: mais alto (evita “bater” na reta/pontos) -->
      <text class="band-text a-bandText" x="391.5" y="56">
        50% central 
      </text>
      <text class="band-text a-bandText" x="391.5" y="86">
        <tspan class="soft">(entre Q1 e Q3)</tspan>
      </text>
      <!-- pontos -->
      <g class="a-dots">
        <!-- fora do intervalo interquartílico -->
        <circle class="dot outerFade" cx="0"    cy="150" r="9"/>   <!-- 15 -->
        <circle class="dot outerFade" cx="174"  cy="150" r="9"/>   <!-- 18 -->
        <circle class="dot outerFade" cx="580"  cy="150" r="9"/>   <!-- 25 -->
        <circle class="dot outerFade" cx="1160" cy="150" r="9"/>   <!-- 35 -->

        <!-- 50% central -->
        <circle class="dot" cx="290" cy="150" r="9"/>  <!-- 20 -->
        <circle class="dot" cx="406" cy="150" r="9"/>  <!-- 22 -->
        <circle class="dot" cx="464" cy="150" r="9"/>  <!-- 23 -->
        <circle class="dot" cx="522" cy="150" r="9"/>  <!-- 24 -->
      </g>

      <!-- linhas Q1 e Q3 -->
      <line class="qline q1 a-q1" x1="232" y1="52" x2="232" y2="235"/>
      <line class="qline q3 a-q3" x1="551" y1="52" x2="551" y2="235"/>

      <text class="qlab a-q1t" x="232" y="36" text-anchor="middle">
        Q<tspan class="sub">1</tspan> <tspan class="val">= 19</tspan>
      </text>
      <text class="qlab a-q3t" x="551" y="36" text-anchor="middle">
        Q<tspan class="sub">3</tspan> <tspan class="val">= 24,5</tspan>
      </text>

      <!-- meio da faixa: rótulo mais “colado” na linha do meio, longe do colchete -->
      <line class="midline a-mid" x1="391.5" y1="70" x2="391.5" y2="235"/>
      <text class="midlab a-mid" x="391.5" y="258">meio da faixa (Q1+Q3)/2</text>

      <!-- semi-AIQ: colchete mais embaixo (evita sobreposição com “meio da faixa”) -->
      <line class="half-line a-half" x1="232"   y1="318" x2="391.5" y2="318"/>
      <line class="half-line a-half" x1="391.5" y1="318" x2="551"   y2="318"/>

      <line class="cap a-cap" x1="232"   y1="306" x2="232"   y2="330"/>
      <line class="cap a-cap" x1="391.5" y1="306" x2="391.5" y2="330"/>
      <line class="cap a-cap" x1="551"   y1="306" x2="551"   y2="330"/>

      <text class="half-label a-hlabel" x="391.5" y="356">Semi-AIQ</text>
      <text class="half-formula a-hlabel" x="391.5" y="384">
        = (Q<tspan baseline-shift="sub" font-size="16">3</tspan> − Q<tspan baseline-shift="sub" font-size="16">1</tspan>)/2
        = (24,5 − 19)/2 = 2,75
      </text>
    </g>
  </g>
</svg>
