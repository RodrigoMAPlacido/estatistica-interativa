<?xml version="1.0" encoding="UTF-8"?>
<!-- =========================================================
   PERCENTIS (Per) — Cursor (n=10): Dois quadros | CSS-only | Padrão u-*/a-*
   Reaproveita dados/estética do SVG de décis (rol com 10 valores).
   Cursor: Per5 → Per25 → Per50 → Per75 → Per95 (uma linha por vez).
   Nomenclatura:
     - Percentil: Per
     - Posição:  Pos   (para não confundir com "P")
   ========================================================= -->
<svg viewBox="0 0 1500 780" xmlns="http://www.w3.org/2000/svg"
     role="img" aria-labelledby="title desc">
  <title id="title">Percentis (Per) - dados nao-agrupados (n=10)</title>
  <desc id="desc">
    Painel esquerdo: dados, rol, posicoes Pos = p·n/100 e percentis Per_p pela regra:
    se Pos inteiro, ponto medio; se não inteiro, usa x_(ceil(Pos)).
    Painel direito: reta numerica com pontos do rol; um cursor destaca Per5, Per25, Per50, Per75 e Per95 em sequencia
    (faixa acumulada + linha + rotulo + valor + percentual que desce).
  </desc>

  <defs>
    <style>
      :root{
        --ink:#111827;
        --ink-soft:#64748b;
        --grid:#e5e7eb;
        --accent:#64748b;
        --font:"et-book","ETBook","Georgia",serif;

        --cycle:12s;
        --ease:ease-in-out;
      }

      text{
        font-family:var(--font);
        fill:var(--ink);
        user-select:none;
      }

      .u-stroke{ stroke:var(--ink); fill:none; stroke-linecap:round; stroke-linejoin:round; }
      .u-panel{ stroke-width:2; }

      .label{ font-size:48px; font-weight:700; text-anchor:middle; }
      .small{ font-size:22px; text-anchor:middle; fill:var(--ink-soft); }

      .mono{ font-variant-numeric: tabular-nums; }

      /* Painel esquerdo */
      .k{ font-size:20px; font-weight:700; fill:var(--ink); text-anchor:end; }
      .v{ font-size:22px; fill:var(--ink); }
      .f{ font-size:18px; fill:var(--ink-soft); }
      .hr{ stroke:var(--grid); stroke-width:2; }

      .hi{ fill:var(--grid); opacity:0; }
      @keyframes h1{ 0%,10%{opacity:0} 14%,24%{opacity:.55} 28%,100%{opacity:0} }
      @keyframes h2{ 0%,24%{opacity:0} 28%,38%{opacity:.45} 42%,100%{opacity:0} }
      @keyframes h3{ 0%,40%{opacity:0} 44%,54%{opacity:.40} 58%,100%{opacity:0} }
      @keyframes h4{ 0%,56%{opacity:0} 60%,100%{opacity:.35} }
      .a-h1{ animation:h1 var(--cycle) var(--ease) infinite; }
      .a-h2{ animation:h2 var(--cycle) var(--ease) infinite; }
      .a-h3{ animation:h3 var(--cycle) var(--ease) infinite; }
      .a-h4{ animation:h4 var(--cycle) var(--ease) infinite; }

      /* Painel direito */
      .axis{ stroke-width:2; }
      .grid{ stroke:var(--grid); stroke-width:1; stroke-dasharray:6 8; }
      .tick-label{ font-size:18px; fill:var(--ink-soft); }

      .dot{ fill:var(--ink); opacity:.9; }
      .dot.soft{ opacity:.55; }
      .data-lab{ font-size:16px; fill:var(--ink-soft); text-anchor:middle; }

      /* Cursor: faixa + linha + rótulo + valor + % que cai */
      .seg{ fill:var(--accent); opacity:0; }
      .pline{ stroke:var(--accent); stroke-width:4; opacity:0; }
      .plab{ font-size:22px; font-weight:650; fill:var(--ink); opacity:0; text-anchor:middle; }
      .plab .sub{ font-size:15px; baseline-shift:sub; }
      .pval{ font-size:15px; fill:var(--ink-soft); opacity:0; text-anchor:middle; }

      .pct{
        font-size:18px;
        fill:var(--ink-soft);
        text-anchor:middle;
        transform-box:fill-box;
        transform-origin:50% 50%;
        opacity:0;
      }

      /* dots entram e permanecem */
      .a-dots{
        transform-box:fill-box;
        transform-origin:50% 50%;
        animation:dotsIn var(--cycle) var(--ease) infinite;
      }
      @keyframes dotsIn{
        0%,12%{ opacity:0; transform:scale(.985); }
        20%,100%{ opacity:1; transform:scale(1); }
      }

      /* =========================================================
         JANELAS DO CURSOR (12s):
         - Per5  : 20%..36%
         - Per25 : 36%..52%
         - Per50 : 52%..68%
         - Per75 : 68%..84%
         - Per95 : 84%..100%
         ========================================================= */

      /* Faixas: aparecem durante a janela do percentil (não acumulam) */
      @keyframes seg5  { 0%,20%{opacity:0} 24%,36%{opacity:.18} 40%,100%{opacity:0} }
      @keyframes seg25 { 0%,36%{opacity:0} 40%,52%{opacity:.18} 56%,100%{opacity:0} }
      @keyframes seg50 { 0%,52%{opacity:0} 56%,68%{opacity:.18} 72%,100%{opacity:0} }
      @keyframes seg75 { 0%,68%{opacity:0} 72%,84%{opacity:.18} 88%,100%{opacity:0} }
      @keyframes seg95 { 0%,84%{opacity:0} 88%,100%{opacity:.18} }

      .a-seg5  { animation:seg5  var(--cycle) var(--ease) infinite; }
      .a-seg25 { animation:seg25 var(--cycle) var(--ease) infinite; }
      .a-seg50 { animation:seg50 var(--cycle) var(--ease) infinite; }
      .a-seg75 { animation:seg75 var(--cycle) var(--ease) infinite; }
      .a-seg95 { animation:seg95 var(--cycle) var(--ease) infinite; }

      /* Linha/rótulo/valor: aparecem durante a janela */
      @keyframes on5  { 0%,20%{opacity:0} 26%,36%{opacity:1} 40%,100%{opacity:0} }
      @keyframes on25 { 0%,36%{opacity:0} 42%,52%{opacity:1} 56%,100%{opacity:0} }
      @keyframes on50 { 0%,52%{opacity:0} 58%,68%{opacity:1} 72%,100%{opacity:0} }
      @keyframes on75 { 0%,68%{opacity:0} 74%,84%{opacity:1} 88%,100%{opacity:0} }
      @keyframes on95 { 0%,84%{opacity:0} 90%,100%{opacity:1} }

      .a-per5  { animation:on5  var(--cycle) var(--ease) infinite; }
      .a-per25 { animation:on25 var(--cycle) var(--ease) infinite; }
      .a-per50 { animation:on50 var(--cycle) var(--ease) infinite; }
      .a-per75 { animation:on75 var(--cycle) var(--ease) infinite; }
      .a-per95 { animation:on95 var(--cycle) var(--ease) infinite; }

      /* Percentuais: aparecem e “descem” dentro da janela */
      @keyframes pct5{
        0%,20%{opacity:0; transform:translateY(0)}
        26%{opacity:1; transform:translateY(0)}
        34%{opacity:1; transform:translateY(108px)}
        40%,100%{opacity:0; transform:translateY(108px)}
      }
      @keyframes pct25{
        0%,36%{opacity:0; transform:translateY(0)}
        42%{opacity:1; transform:translateY(0)}
        50%{opacity:1; transform:translateY(108px)}
        56%,100%{opacity:0; transform:translateY(108px)}
      }
      @keyframes pct50{
        0%,52%{opacity:0; transform:translateY(0)}
        58%{opacity:1; transform:translateY(0)}
        66%{opacity:1; transform:translateY(108px)}
        72%,100%{opacity:0; transform:translateY(108px)}
      }
      @keyframes pct75{
        0%,68%{opacity:0; transform:translateY(0)}
        74%{opacity:1; transform:translateY(0)}
        82%{opacity:1; transform:translateY(108px)}
        88%,100%{opacity:0; transform:translateY(108px)}
      }
      @keyframes pct95{
        0%,84%{opacity:0; transform:translateY(0)}
        90%{opacity:1; transform:translateY(0)}
        98%{opacity:1; transform:translateY(108px)}
        100%{opacity:1; transform:translateY(108px)}
      }

      .a-pct5  { animation:pct5  var(--cycle) var(--ease) infinite; }
      .a-pct25 { animation:pct25 var(--cycle) var(--ease) infinite; }
      .a-pct50 { animation:pct50 var(--cycle) var(--ease) infinite; }
      .a-pct75 { animation:pct75 var(--cycle) var(--ease) infinite; }
      .a-pct95 { animation:pct95 var(--cycle) var(--ease) infinite; }

      @media (prefers-reduced-motion:reduce){
        .a-h1,.a-h2,.a-h3,.a-h4,
        .a-dots,
        .a-seg5,.a-seg25,.a-seg50,.a-seg75,.a-seg95,
        .a-per5,.a-per25,.a-per50,.a-per75,.a-per95,
        .a-pct5,.a-pct25,.a-pct50,.a-pct75,.a-pct95{
          animation:none;
        }
        .hi{ opacity:.35; }

        /* mostra tudo (estático) */
        .seg{ opacity:.10; }
        .pline,.plab,.pval{ opacity:1; }
        .pct{ opacity:1; transform:translateY(108px); }
      }
    </style>
  </defs>

  <!-- =========================
       Painel esquerdo
       ========================= -->
  <g id="panel-left">
    <rect x="90" y="110" width="640" height="560" rx="14" ry="14" class="u-panel u-stroke"/>

    <text x="410" y="168" class="label">Exemplo</text>
    <text x="410" y="208" class="small">Percentis (Per) por posição no rol</text>

    <g transform="translate(0,30)">
      <line x1="120" y1="268" x2="700" y2="268" class="hr"/>
      <line x1="120" y1="352" x2="700" y2="352" class="hr"/>
      <line x1="120" y1="470" x2="700" y2="470" class="hr"/>

      <rect x="120" y="210" width="580" height="58"  class="hi a-h1"/>
      <rect x="120" y="264" width="580" height="88"  class="hi a-h2"/>
      <rect x="120" y="353" width="580" height="117" class="hi a-h3"/>
      <rect x="120" y="468" width="580" height="150" class="hi a-h4"/>

      <g class="mono">
        <!-- rótulos -->
        <text x="245" y="246" class="k">Dados</text>
        <text x="245" y="310" class="k">Ordem</text>
        <text x="255" y="330" class="k">crescente</text>
        <text x="245" y="410" class="k">Posições</text>
        <text x="235" y="530" class="k">Percentis</text>

        <!-- valores -->
        <text x="325" y="246" class="v">A = {12, 5, 7, 9, 15, 6, 10, 8, 13, 11}</text>
        <text x="325" y="315" class="v">A = {5, 6, 7, 8, 9, 10, 11, 12, 13, 15}</text>

        <text x="380" y="380" class="f">
          P<tspan baseline-shift="sub" font-size="14">Per</tspan> = k·n/100,  n = 10
        </text>

        <text x="305" y="412" class="v">
          • P<tspan baseline-shift="sub" font-size="16">Per5</tspan>=0,5
        </text>

        <text x="437" y="412" class="v">
          • P<tspan baseline-shift="sub" font-size="16">Per25</tspan>=2,5

        </text>

        <text x="569" y="412" class="v">
          • P<tspan baseline-shift="sub" font-size="16">Per5</tspan>=5

        </text>

        <text x="355" y="448" class="v">
          • P<tspan baseline-shift="sub" font-size="16">Per75</tspan>=7,5
        </text>
        <text x="500" y="448" class="v">
          • P<tspan baseline-shift="sub" font-size="16">Per95</tspan>=9,5
        </text>
        <text x="320" y="500" class="f">
          (Ponto Médio) Per<tspan baseline-shift="sub" font-size="14">k</tspan> =
          (x<tspan baseline-shift="sub" font-size="14">(P)</tspan> + x<tspan baseline-shift="sub" font-size="14">(P+1)</tspan>)/2
        </text>

        <text x="305" y="544" class="v">
         • Per<tspan baseline-shift="sub" font-size="16">5</tspan>=5
          <tspan dx="22"/>
        </text>

        <text x="437" y="544" class="v">
         • Per<tspan baseline-shift="sub" font-size="16">25</tspan>=7
        </text>
        <text x="569" y="544" class="v">
         • Per<tspan baseline-shift="sub" font-size="16">50</tspan>=9,5
        </text>
        <text x="355" y="592" class="v">
         • Per<tspan baseline-shift="sub" font-size="16">75</tspan>=12
        </text>
        <text x="500" y="592" class="v">
         • Per<tspan baseline-shift="sub" font-size="16">95</tspan>=15
        </text>
      </g>
    </g>
  </g>

  <!-- =========================
       Painel direito
       ========================= -->
  <g id="panel-right">
    <rect x="770" y="110" width="640" height="560" rx="14" ry="14" class="u-panel u-stroke"/>

    <text x="1090" y="168" class="label">Percentis (Per)</text>
    <text x="1090" y="208" class="small">Cursor: Per5 → Per25 → Per50 → Per75 → Per95</text>

    <g transform="translate(0,30)">
      <!-- Escala: 5..15 em x0=820..x1=1360 (1 un = 54) -->
      <g id="plot-right">
        <g class="grid">
          <line x1="820" y1="330" x2="1360" y2="330"/>
          <line x1="820" y1="405" x2="1360" y2="405"/>
          <line x1="820" y1="480" x2="1360" y2="480"/>
        </g>

        <g class="u-stroke axis">
          <line x1="820" y1="405" x2="1360" y2="405"/>
        </g>

        <g class="u-stroke" style="stroke-width:2">
          <line x1="820"  y1="395" x2="820"  y2="415"/>
          <line x1="1090" y1="395" x2="1090" y2="415"/>
          <line x1="1360" y1="395" x2="1360" y2="415"/>
        </g>
        <g class="tick-label">
          <text x="820"  y="450" text-anchor="middle">5</text>
          <text x="1090" y="450" text-anchor="middle">10</text>
          <text x="1360" y="450" text-anchor="middle">15</text>
        </g>

        <!-- ===== Faixas do cursor (uma por vez) =====
             Coordenadas úteis:
             5   -> 820
             7   -> 928
             9,5 -> 1063
             12  -> 1198
             15  -> 1360
        -->
        <rect class="seg a-seg5"  x="820" y="375" width="18"  height="60"/>
        <rect class="seg a-seg25" x="820" y="375" width="108" height="60"/>
        <rect class="seg a-seg50" x="820" y="375" width="243" height="60"/>
        <rect class="seg a-seg75" x="820" y="375" width="378" height="60"/>
        <rect class="seg a-seg95" x="820" y="375" width="540" height="60"/>

        <!-- pontos do rol -->
        <g class="a-dots">
          <circle class="dot"      cx="820"  cy="405" r="7"/>
          <circle class="dot soft" cx="874"  cy="405" r="7"/>
          <circle class="dot"      cx="928"  cy="405" r="7"/>
          <circle class="dot soft" cx="982"  cy="405" r="7"/>
          <circle class="dot"      cx="1036" cy="405" r="7"/>
          <circle class="dot soft" cx="1090" cy="405" r="7"/>
          <circle class="dot"      cx="1144" cy="405" r="7"/>
          <circle class="dot soft" cx="1198" cy="405" r="7"/>
          <circle class="dot"      cx="1252" cy="405" r="7"/>
          <circle class="dot soft" cx="1360" cy="405" r="7"/>
        </g>

        <!-- rótulos dos dados -->
        <text class="data-lab" x="820"  y="355">5</text>
        <text class="data-lab" x="874"  y="505">6</text>
        <text class="data-lab" x="928"  y="355">7</text>
        <text class="data-lab" x="982"  y="505">8</text>
        <text class="data-lab" x="1036" y="355">9</text>
        <text class="data-lab" x="1090" y="505">10</text>
        <text class="data-lab" x="1144" y="355">11</text>
        <text class="data-lab" x="1198" y="505">12</text>
        <text class="data-lab" x="1252" y="355">13</text>
        <text class="data-lab" x="1360" y="505">15</text>

        <!-- ===== Linhas do cursor (uma por vez) ===== -->
        <line class="pline a-per5"  x1="820"  y1="305" x2="820"  y2="545"/>
        <line class="pline a-per25" x1="928"  y1="305" x2="928"  y2="545"/>
        <line class="pline a-per50" x1="1063" y1="305" x2="1063" y2="545"/>
        <line class="pline a-per75" x1="1198" y1="305" x2="1198" y2="545"/>
        <line class="pline a-per95" x1="1360" y1="305" x2="1360" y2="545"/>

        <!-- rótulos -->
        <text class="plab a-per5"  x="820"  y="238">Per<tspan class="sub">5</tspan></text>
        <text class="plab a-per25" x="928"  y="238">Per<tspan class="sub">25</tspan></text>
        <text class="plab a-per50" x="1063" y="238">Per<tspan class="sub">50</tspan></text>
        <text class="plab a-per75" x="1198" y="238">Per<tspan class="sub">75</tspan></text>
        <text class="plab a-per95" x="1360" y="238">Per<tspan class="sub">95</tspan></text>

        <!-- valores -->
        <text class="pval a-per5"  x="820"  y="266">5</text>
        <text class="pval a-per25" x="928"  y="266">7</text>
        <text class="pval a-per50" x="1063" y="266">9,5</text>
        <text class="pval a-per75" x="1198" y="266">12</text>
        <text class="pval a-per95" x="1360" y="266">15</text>

        <!-- percentuais que descem -->
        <text class="pct a-pct5"  x="820"  y="450">5%</text>
        <text class="pct a-pct25" x="928"  y="450">25%</text>
        <text class="pct a-pct50" x="1063" y="450">50%</text>
        <text class="pct a-pct75" x="1198" y="450">75%</text>
        <text class="pct a-pct95" x="1360" y="450">95%</text>
      </g>
    </g>
  </g>
</svg>
