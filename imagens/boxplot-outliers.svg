<!-- =========================================================
   BOXPLOT — CONCEITO (CSS-only) | PALETA PADRÃO DO PROJETO
   Quartis → componentes do boxplot + LI/LS e outliers (estilo Tukey)
   Mantém animação anterior (atos) e evita sobreposição min/máx.
   ========================================================= -->
<svg viewBox="0 0 1550 744" xmlns="http://www.w3.org/2000/svg"
     role="img" aria-labelledby="title desc">
  <title id="title">Boxplot: quartis, mediana, limites e outliers</title>
  <desc id="desc">
    A animação mostra observações ordenadas, destaca 25%, 50% e 75% e marca Q1, Q2 e Q3.
    Em seguida, apresenta o boxplot conceitual no padrão de Tukey: caixa (Q1–Q3), mediana,
    whiskers até os limites não atípicos e pontos fora de LI/LS como outliers.
  </desc>

  <defs>
    <style>
      :root{
        --ink:#111827;
        --ink-soft:#64748b;
        --grid:#e5e7eb;
        --accent:#64748b;
        --font:"et-book","ETBook","Georgia",serif;

        --cycle:8s;
        --ease:ease-in-out;
      }

      text{ font-family:var(--font); fill:var(--ink); user-select:none; }

      .u-stroke{
        stroke:var(--ink);
        fill:none;
        stroke-linecap:round;
        stroke-linejoin:round;
      }

      .u-panel{ stroke-width:2; rx:22; ry:22; }

      .label{
        font-size:46px;
        font-weight:600;
        text-anchor:middle;
      }
      .small{
        font-size:32px;
        text-anchor:middle;
        fill:var(--ink-soft);
      }

      .axis{ stroke-width:2; }

      .grid{
        stroke:var(--grid);
        stroke-width:1;
        stroke-dasharray:6 8;
      }

      .tick-label{ font-size:22px; fill:var(--ink-soft); }

      /* ===================== ELEMENTOS BASE ===================== */
      .dot{ fill:var(--ink); opacity:.9; }
      .dot.soft{ opacity:.55; }

      .seg{ fill:var(--accent); opacity:0; }

      .qline{
        stroke:var(--accent);
        stroke-width:4;
        opacity:0;
      }
      .q1{ stroke-dasharray:10 10; }  /* Q1 */
      .q2{ stroke-dasharray:none; }   /* Q2 */
      .q3{ stroke-dasharray:2 10; }   /* Q3 */

      .qlab{
        font-size:28px;
        font-weight:600;
        fill:var(--ink);
        opacity:0;
      }
      .qlab .sub{ font-size:18px; baseline-shift:sub; }
      .qlab .hint{ font-size:22px; fill:var(--ink-soft); font-weight:500; }

      /* % que “desce” */
      .pct{
        font-size:22px;
        fill:var(--ink-soft);
        text-anchor:middle;
        opacity:0;
      }

      /* ===================== BOX PLOT (Tukey conceitual) ===================== */
      .bp{ opacity:0; }

      .bp-line{ stroke:var(--ink); stroke-width:3.2; fill:none; }
      .bp-box{ fill:#fff; stroke:var(--ink); stroke-width:3.2; rx:10; ry:10; }

      .bp-cap{ stroke:var(--ink); stroke-width:3.2; }
      .bp-cap.minmax{ stroke-width:4.0; } /* “peso” */
      .bp-cap.q1{ stroke:var(--accent); stroke-dasharray:10 10; }
      .bp-cap.q2{ stroke:var(--ink); } /* mediana mais forte */
      .bp-cap.q3{ stroke:var(--accent); stroke-dasharray:2 10; }

      /* Cercas (LI/LS) */
      .bp-fence{
        stroke:var(--ink-soft);
        stroke-width:2.6;
        stroke-dasharray:7 8;
        opacity:.95;
      }
      .bp-fence-text{
        font-size:20px;
        font-weight:700;
        fill:var(--ink-soft);
      }

      /* Outliers */
      .bp-out{
        fill:#fff;
        stroke:var(--ink);
        stroke-width:2.8;
      }
      .bp-out-link{
        stroke:var(--ink-soft);
        stroke-width:2.2;
        stroke-dasharray:4 7;
      }
      .bp-out-text{
        font-size:22px;
        font-weight:700;
        fill:var(--ink-soft);
      }

      .bp-text{ font-size:22px; font-weight:700; fill:var(--ink); }
      .bp-sub{ font-size:20px; font-weight:600; fill:var(--ink-soft); }

      /* Chaves / colchetes embaixo */
      .brace{
        stroke:var(--ink-soft);
        stroke-width:2.4;
        fill:none;
      }
      .brace-strong{
        stroke:var(--ink);
        stroke-width:2.6;
        fill:none;
        opacity:.9;
      }
      .brace-text{
        font-size:20px;
        font-weight:700;
        fill:var(--ink-soft);
      }

      /* ===================== NOTA FINAL ===================== */
      .note-box{
        fill:#fff;
        stroke:var(--grid);
        stroke-width:2;
        rx:18; ry:18;
        opacity:0;
      }
      .note-text{
        font-size:26px;
        fill:var(--ink);
        opacity:0;
      }
      .note-text .strong{ font-weight:700; }
      .note-text .soft{ fill:var(--ink-soft); }

      /* ===================== ANIMAÇÕES (3 ATOS) ===================== */
      .a-dots{ animation:dotsIn var(--cycle) var(--ease) infinite; }
      @keyframes dotsIn{
        0%,10%{ opacity:0; transform:scale(.985); }
        18%,55%{ opacity:1; transform:scale(1); }
        60%,100%{ opacity:.14; transform:scale(1); }
      }

      .a-seg25{ animation:seg25 var(--cycle) var(--ease) infinite; }
      .a-seg50{ animation:seg50 var(--cycle) var(--ease) infinite; }
      .a-seg75{ animation:seg75 var(--cycle) var(--ease) infinite; }
      @keyframes seg25{ 0%,18%{opacity:0} 26%,55%{opacity:.18} 60%,100%{opacity:0} }
      @keyframes seg50{ 0%,28%{opacity:0} 36%,55%{opacity:.16} 60%,100%{opacity:0} }
      @keyframes seg75{ 0%,38%{opacity:0} 46%,55%{opacity:.14} 60%,100%{opacity:0} }

      .a-q1{ animation:q1On var(--cycle) var(--ease) infinite; }
      .a-q2{ animation:q2On var(--cycle) var(--ease) infinite; }
      .a-q3{ animation:q3On var(--cycle) var(--ease) infinite; }
      @keyframes q1On{ 0%,22%{opacity:0} 30%,55%{opacity:1} 60%,100%{opacity:0} }
      @keyframes q2On{ 0%,32%{opacity:0} 40%,55%{opacity:1} 60%,100%{opacity:0} }
      @keyframes q3On{ 0%,42%{opacity:0} 50%,55%{opacity:1} 60%,100%{opacity:0} }

      .a-q1t{ animation:q1T var(--cycle) var(--ease) infinite; }
      .a-q2t{ animation:q2T var(--cycle) var(--ease) infinite; }
      .a-q3t{ animation:q3T var(--cycle) var(--ease) infinite; }
      @keyframes q1T{ 0%,24%{opacity:0} 32%,55%{opacity:1} 60%,100%{opacity:0} }
      @keyframes q2T{ 0%,34%{opacity:0} 42%,55%{opacity:1} 60%,100%{opacity:0} }
      @keyframes q3T{ 0%,44%{opacity:0} 52%,55%{opacity:1} 60%,100%{opacity:0} }

      .a-p25{ animation:pct25 var(--cycle) var(--ease) infinite; }
      .a-p50{ animation:pct50 var(--cycle) var(--ease) infinite; }
      .a-p75{ animation:pct75 var(--cycle) var(--ease) infinite; }

      @keyframes pct25{
        0%,24%{ opacity:0; transform:translateY(0px); }
        28%,55%{ opacity:1; transform:translateY(93px); }
        60%,100%{ opacity:0; transform:translateY(93px); }
      }
      @keyframes pct50{
        0%,34%{ opacity:0; transform:translateY(0px); }
        38%,55%{ opacity:1; transform:translateY(93px); }
        60%,100%{ opacity:0; transform:translateY(93px); }
      }
      @keyframes pct75{
        0%,44%{ opacity:0; transform:translateY(0px); }
        48%,55%{ opacity:1; transform:translateY(93px); }
        60%,100%{ opacity:0; transform:translateY(93px); }
      }

      /* NOVO: some “mín/máx” do ato 1 quando o boxplot entra (evita sobreposição) */
      .a-hideOnBp{ animation:hideOnBp var(--cycle) var(--ease) infinite; }
      @keyframes hideOnBp{
        0%,60%{ opacity:1; }
        66%,100%{ opacity:0; }
      }

      .a-bp{ animation:bpOn var(--cycle) var(--ease) infinite; }
      @keyframes bpOn{
        0%,58%{ opacity:0; transform:translateY(6px); }
        64%,100%{ opacity:1; transform:translateY(0px); }
      }

      .a-note{ animation:noteOn var(--cycle) var(--ease) infinite; }
      @keyframes noteOn{
        0%,72%{ opacity:0; transform:translateY(8px); }
        78%,100%{ opacity:1; transform:translateY(0px); }
      }

      @media (prefers-reduced-motion:reduce){
        .a-dots,.a-seg25,.a-seg50,.a-seg75,.a-q1,.a-q2,.a-q3,.a-q1t,.a-q2t,.a-q3t,
        .a-p25,.a-p50,.a-p75,.a-bp,.a-note,.a-hideOnBp{ animation:none; }

        .seg{ opacity:.14; }
        .qline,.qlab{ opacity:1; }
        .pct{ opacity:1; transform:translateY(93px); }
        .bp{ opacity:1; transform:none; }
        .note-box,.note-text{ opacity:1; transform:none; }
      }
    </style>
  </defs>

  <g transform="translate(85,92)">
    <rect x="0" y="0" width="1380" height="560" class="u-panel u-stroke"/>

    <text x="690" y="55" class="label">Boxplot</text>
    <text x="690" y="90" class="small">Quartis (Q1, Q2, Q3) e limites para outliers</text>

    <g transform="translate(110,150)">
      <g class="grid">
        <line x1="0" y1="90"  x2="1160" y2="90"/>
        <line x1="0" y1="150" x2="1160" y2="150"/>
        <line x1="0" y1="210" x2="1160" y2="210"/>
      </g>

      <g class="u-stroke axis">
        <line x1="0" y1="150" x2="1160" y2="150"/>
      </g>

      <g class="u-stroke a-hideOnBp" style="stroke-width:2">
        <line x1="0"    y1="140" x2="0"    y2="160"/>
        <line x1="290"  y1="140" x2="290"  y2="160"/>
        <line x1="580"  y1="140" x2="580"  y2="160"/>
        <line x1="870"  y1="140" x2="870"  y2="160"/>
        <line x1="1160" y1="140" x2="1160" y2="160"/>
      </g>

      <!-- “mín/máx” do ato 1 (somem quando o boxplot entra) -->
      <g class="tick-label a-hideOnBp">
        <text x="0" y="190" text-anchor="middle">mín</text>
        <text x="1160" y="190" text-anchor="middle">máx</text>
      </g>

      <g class="pct">
        <text class="a-p25" x="290" y="190">25%</text>
        <text class="a-p50" x="580" y="190">50%</text>
        <text class="a-p75" x="870" y="190">75%</text>
      </g>

      <rect class="seg a-seg25" x="0" y="120" width="290" height="60"/>
      <rect class="seg a-seg50" x="0" y="120" width="580" height="60"/>
      <rect class="seg a-seg75" x="0" y="120" width="870" height="60"/>

      <g class="a-dots">
        <circle class="dot"      cx="40.0"   cy="150" r="7"/>
        <circle class="dot soft" cx="96.8"   cy="150" r="7"/>
        <circle class="dot"      cx="153.7"  cy="150" r="7"/>
        <circle class="dot soft" cx="210.5"  cy="150" r="7"/>
        <circle class="dot"      cx="267.4"  cy="150" r="7"/>
        <circle class="dot soft" cx="324.2"  cy="150" r="7"/>
        <circle class="dot"      cx="381.1"  cy="150" r="7"/>
        <circle class="dot soft" cx="437.9"  cy="150" r="7"/>
        <circle class="dot"      cx="494.7"  cy="150" r="7"/>
        <circle class="dot soft" cx="551.6"  cy="150" r="7"/>
        <circle class="dot"      cx="608.4"  cy="150" r="7"/>
        <circle class="dot soft" cx="665.3"  cy="150" r="7"/>
        <circle class="dot"      cx="722.1"  cy="150" r="7"/>
        <circle class="dot soft" cx="778.9"  cy="150" r="7"/>
        <circle class="dot"      cx="835.8"  cy="150" r="7"/>
        <circle class="dot soft" cx="892.6"  cy="150" r="7"/>
        <circle class="dot"      cx="949.5"  cy="150" r="7"/>
        <circle class="dot soft" cx="1006.3" cy="150" r="7"/>
        <circle class="dot"      cx="1063.2" cy="150" r="7"/>
        <circle class="dot soft" cx="1120.0" cy="150" r="7"/>
      </g>

      <!-- quartis (ato 1) -->
      <line class="qline q1 a-q1" x1="290" y1="40" x2="290" y2="250"/>
      <line class="qline q2 a-q2" x1="580" y1="40" x2="580" y2="250"/>
      <line class="qline q3 a-q3" x1="870" y1="40" x2="870" y2="250"/>

      <text class="qlab a-q1t" x="290" y="28" text-anchor="middle">
        Q<tspan class="sub">1</tspan>
      </text>
      <text class="qlab a-q2t" x="580" y="28" text-anchor="middle">
        Q<tspan class="sub">2</tspan><tspan class="hint"> (mediana)</tspan>
      </text>
      <text class="qlab a-q3t" x="870" y="28" text-anchor="middle">
        Q<tspan class="sub">3</tspan>
      </text>

      <!-- =====================================================
           ATO 2: BOXPLOT (Tukey) + LI/LS + OUTLIERS
           Mantém paleta do projeto e estilo da animação.
           ===================================================== -->
      <g class="bp a-bp">
        <!-- Fórmula (estilo do exemplo, sem cores extras) -->
        <g transform="translate(430,-55)">
          <rect x="0" y="0" width="300" height="54" fill="#fff" class="u-stroke" style="stroke-width:2; rx:10; ry:10"/>
          <text x="150" y="36" text-anchor="middle" style="font-size:26px; font-weight:700;">
            IQR = Q<tspan baseline-shift="sub" font-size="18">3</tspan> − Q<tspan baseline-shift="sub" font-size="18">1</tspan>
          </text>
        </g>

        <!-- Escolha didática (conceitual): LI e LS -->
        <!-- LI=140, LS=1020 (linhas tracejadas) -->
        <line x1="140" y1="75" x2="140" y2="235" class="bp-fence"/>
        <line x1="1020" y1="75" x2="1020" y2="235" class="bp-fence"/>

        <text x="140" y="62" text-anchor="middle" class="bp-fence-text">LI</text>
        <text x="1020" y="62" text-anchor="middle" class="bp-fence-text">LS</text>

        <!-- whiskers (até os limites não atípicos) -->
        <line x1="140" y1="150" x2="290" y2="150" class="bp-line"/>
        <line x1="870" y1="150" x2="1020" y2="150" class="bp-line"/>

        <!-- caps nos extremos (não atípicos) -->
        <line x1="140" y1="105" x2="140" y2="195" class="bp-cap minmax"/>
        <line x1="1020" y1="105" x2="1020" y2="195" class="bp-cap minmax"/>

        <!-- caixa mais alta -->
        <rect x="290" y="105" width="580" height="90" class="bp-box"/>

        <!-- mediana -->
        <line x1="580" y1="95" x2="580" y2="205" class="bp-cap q2" style="stroke-width:4.2"/>

        <!-- rótulos superiores (agora alinhados ao estilo Tukey) -->
        <text x="140" y="78" text-anchor="middle" class="bp-text">Menor valor</text>
        <text x="140" y="102" text-anchor="middle" class="bp-sub">não atípico</text>

        <text x="290" y="58" text-anchor="middle" class="bp-text">Quartil inferior</text>
        <text x="290" y="84" text-anchor="middle" class="bp-sub">Q<tspan baseline-shift="sub" font-size="16">1</tspan></text>

        <text x="580" y="58" text-anchor="middle" class="bp-text">Mediana</text>
        <text x="580" y="84" text-anchor="middle" class="bp-sub">Q<tspan baseline-shift="sub" font-size="16">2</tspan></text>

        <text x="870" y="58" text-anchor="middle" class="bp-text">Quartil superior</text>
        <text x="870" y="84" text-anchor="middle" class="bp-sub">Q<tspan baseline-shift="sub" font-size="16">3</tspan></text>

        <text x="1020" y="78" text-anchor="middle" class="bp-text">Maior valor</text>
        <text x="1020" y="102" text-anchor="middle" class="bp-sub">não atípico</text>

        <!-- vocabulário -->
        <text x="215" y="232" text-anchor="middle" class="bp-sub">whisker = bigode</text>
        <text x="945" y="232" text-anchor="middle" class="bp-sub">whisker = bigode</text>
        <text x="580" y="232" text-anchor="middle" class="bp-sub">
          box = caixa (Q<tspan baseline-shift="sub" font-size="16">1</tspan>–Q<tspan baseline-shift="sub" font-size="16">3</tspan>)
        </text>

        <!-- OUTLIERS (pontos fora de LI/LS) -->
        <!-- esquerda -->
        <circle cx="55" cy="150" r="7.5" class="bp-out"/>
        <circle cx="80" cy="150" r="7.5" class="bp-out" opacity=".9"/>
        <line x1="67" y1="160" x2="67" y2="290" class="bp-out-link"/>
        <line x1="92" y1="160" x2="92" y2="290" class="bp-out-link"/>

        <!-- direita -->
        <circle cx="1080" cy="150" r="7.5" class="bp-out"/>
        <circle cx="1105" cy="150" r="7.5" class="bp-out" opacity=".9"/>
        <line x1="1080" y1="160" x2="1080" y2="290" class="bp-out-link"/>
        <line x1="1105" y1="160" x2="1105" y2="290" class="bp-out-link"/>

        <!-- CHAVES / LEITURA (estilo do exemplo) -->
        <!-- IQR sob a caixa -->
        <path class="brace-strong" d="M 300 255
          Q 315 255 315 270
          L 315 276
          Q 315 291 330 291
          L 830 291
          Q 845 291 845 276
          L 845 270
          Q 845 255 860 255" />
        <text x="580" y="315" text-anchor="middle" class="brace-text">Distância interquartílica (IQR)</text>

        <!-- Limite de detecção (LI..LS) -->
        <path class="brace" d="M 150 330
          Q 165 330 165 345
          L 165 350
          Q 165 365 180 365
          L 980 365
          Q 995 365 995 350
          L 995 345
          Q 995 330 1010 330" />
        <text x="580" y="398" text-anchor="middle" class="brace-text">Limite de detecção de outliers</text>

        <!-- Labels LI/LS na base (reforço) -->
        <text x="140" y="324" text-anchor="middle" class="bp-fence-text">Q<tspan baseline-shift="sub" font-size="16">1</tspan> − 1,5·IQR</text>
        <text x="1020" y="324" text-anchor="middle" class="bp-fence-text">Q<tspan baseline-shift="sub" font-size="16">3</tspan> + 1,5·IQR</text>

        <!-- Outliers (fora do limite) -->
        <text x="85" y="410" text-anchor="middle" class="bp-out-text">Outliers</text>
        <text x="1092" y="410" text-anchor="middle" class="bp-out-text">Outliers</text>
      </g>

    </g>

    <!-- nota final -->
    <g class="a-note" transform="translate(110,430)">
      <rect class="note-box" x="0" y="0" width="1160" height="110"/>
      <text class="note-text" x="580" y="44" text-anchor="middle">
        <tspan class="strong">Quartis</tspan> são <tspan class="strong">percentuais de observações</tspan>
        <tspan class="soft"> (25%, 50%, 75%).</tspan>
      </text>
      <text class="note-text" x="580" y="82" text-anchor="middle">
        A regra \(1{,}5\cdot IQR\) define <tspan class="strong">LI</tspan> e <tspan class="strong">LS</tspan> e marca discrepantes como pontos.
      </text>
    </g>
  </g>
</svg>
