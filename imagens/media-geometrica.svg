<!-- ===========================================
   MÉDIA GEOMÉTRICA — Crescimentos e trajetórias
   Visualização otimizada com melhor aproveitamento do espaço
   Dados: fatores 1,2; 1,1; 0,9; 1,3
   =========================================== -->
<svg viewBox="0 0 1200 600" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="title desc">
  <title id="title">Média geométrica como crescimento equivalente</title>
  <desc id="desc">
    À esquerda, barras mostram quatro taxas anuais de crescimento de um investimento, associadas
    aos fatores 1,2; 1,1; 0,9; 1,3. À direita, duas trajetórias do valor do investimento:
    uma com esses fatores ano a ano (100 → 120 → 132 → 118,8 → 154,44) e outra com uma única
    taxa constante, a média geométrica dos fatores, que também leva de 100 a 154,44.
  </desc>

  <defs>
    <style>
      :root{
        --ink:#111827;
        --font:"et-book","ETBook","Georgia",serif;
        --cycle:8s;
        --ease:ease-in-out;
      }

      /* Base tipográfica */
      text{
        font-family:var(--font);
        fill:var(--ink);
        user-select:none;
      }
      .u-stroke{
        stroke:var(--ink);
        fill:none;
        stroke-linecap:round;
        stroke-linejoin:round;
      }
      .u-panel{
        stroke-width:2;
        rx:12;
      }
      .label{
        font-size:34px;
        font-weight:600;
        text-anchor:middle;
      }
      .u-small{ font-size:18px; }
      .tiny{ font-size:16px; }
      .leg{ font-size:20px; }

      /* ====== Animação das barras (crescer a partir do zero) ====== */
      @keyframes growBar{
        0%{   transform:scaleY(0); }
        15%,70%{ transform:scaleY(1); }
        100%{ transform:scaleY(0); }
      }
      .bar{
        fill:var(--ink);
        transform-box:fill-box;
        transform-origin:bottom;
        transform:scaleY(0);
      }
      .b1{ animation:growBar var(--cycle) var(--ease) infinite 0s; }
      .b2{ animation:growBar var(--cycle) var(--ease) infinite .2s; }
      .b3{ animation:growBar var(--cycle) var(--ease) infinite .4s; }
      .b4{ animation:growBar var(--cycle) var(--ease) infinite .6s; }

      /* ====== Animação das trajetórias (efeito traçado) ====== */
      @keyframes drawPath{
        0%{   stroke-dashoffset:600; opacity:0; }
        20%{  stroke-dashoffset:600; opacity:0; }
        35%,75%{ stroke-dashoffset:0; opacity:1; }
        95%,100%{ stroke-dashoffset:600; opacity:0; }
      }
      .path-real,
      .path-geo{
        fill:none;
        stroke-width:2.5;
        stroke-dasharray:600;
        stroke-dashoffset:600;
        opacity:0;
        animation:drawPath var(--cycle) var(--ease) infinite;
      }
      .path-real{ stroke:var(--ink); animation-delay:.4s; }
      .path-geo{ stroke:var(--ink); stroke-dasharray:5 5; animation-delay:.9s; }

      /* Marcadores de pontos ao longo das trajetórias */
      @keyframes pop{
        0%,30%{ opacity:0; transform:scale(0); }
        40%,75%{ opacity:1; transform:scale(1); }
        95%,100%{ opacity:0; transform:scale(0); }
      }
      .dot{
        fill:var(--ink);
        opacity:0;
        transform-box:fill-box;
        transform-origin:center;
        animation:pop var(--cycle) var(--ease) infinite;
      }
      .d1{ animation-delay:.45s; }
      .d2{ animation-delay:.60s; }
      .d3{ animation-delay:.75s; }
      .d4{ animation-delay:.90s; }
      .d5{ animation-delay:1.05s; }

      .dot-geo{
        fill:#fff;
        stroke:var(--ink);
        stroke-width:1.5;
      }

      /* Acessibilidade: reduzir movimento */
      @media (prefers-reduced-motion:reduce){
        .bar{
          animation:none;
          transform:scaleY(1);
        }
        .path-real,
        .path-geo{
          animation:none;
          stroke-dashoffset:0;
          opacity:1;
        }
        .dot{
          animation:none;
          opacity:1;
          transform:scale(1);
        }
      }
    </style>
  </defs>

  <!-- ============ PAINEL ESQUERDO: CRESCIMENTOS ANO A ANO ============ -->
  <g id="panel-growth">
    <!-- Moldura -->
    <rect x="20" y="20" width="540" height="510" class="u-panel u-stroke"/>

    <!-- Cabeçalho -->
    <text x="300" y="60" class="label">Média geométrica</text>
    <text x="300" y="85" class="u-small" text-anchor="middle">
      Crescimento ano a ano de um investimento
    </text>

    <!-- Corpo: barras de variação percentual -->
    <g>
      <!-- Eixos (0% em y = 320) -->
      <g class="u-stroke" style="stroke-width:2">
        <line x1="80" y1="320" x2="520" y2="320"/>
        <line x1="80" y1="140" x2="80" y2="380"/>
      </g>

      <!-- Grades e ticks (escala: 1% = 3 px) -->
      <g class="u-stroke" opacity=".2" style="stroke-width:1">
        <!-- +30% -->
        <line x1="80" y1="140" x2="520" y2="140"/>
        <!-- +20% -->
        <line x1="80" y1="200" x2="520" y2="200"/>
        <!-- +10% -->
        <line x1="80" y1="260" x2="520" y2="260"/>
        <!--  0% -->
        <line x1="80" y1="320" x2="520" y2="320"/>
        <!-- −10% -->
        <line x1="80" y1="380" x2="520" y2="380"/>
      </g>

      <!-- Rótulos de % -->
      <g class="u-small" opacity=".7">
        <text x="70" y="143" text-anchor="end">+30%</text>
        <text x="70" y="203" text-anchor="end">+20%</text>
        <text x="70" y="263" text-anchor="end">+10%</text>
        <text x="70" y="323" text-anchor="end">0%</text>
        <text x="70" y="383" text-anchor="end">−10%</text>
      </g>

      <!-- Barras usando os fatores: 1,2; 1,1; 0,9; 1,3 -->
      <!-- 0% em y=320, escala 1% = 3 px -->
      <rect x="120" y="200" width="70" height="120" class="bar b1"/>
      <rect x="220" y="260" width="70" height="60" class="bar b2"/>
      <rect x="320" y="320" width="70" height="60" class="bar b3"/>
      <rect x="420" y="140" width="70" height="180" class="bar b4"/>

      <!-- Rótulos dos anos -->
      <g class="u-small">
        <text x="155" y="405" text-anchor="middle">Ano 1</text>
        <text x="255" y="405" text-anchor="middle">Ano 2</text>
        <text x="355" y="405" text-anchor="middle">Ano 3</text>
        <text x="455" y="405" text-anchor="middle">Ano 4</text>
      </g>
    </g>

    <!-- Rodapé -->
    <g>
      <text x="300" y="440" class="tiny" text-anchor="middle">
        Fatores de crescimento: 1,2; 1,1; 0,9; 1,3
      </text>
      <text x="300" y="465" class="tiny" text-anchor="middle">
        (taxas +20%, +10%, −10% e +30%)
      </text>
      <text x="300" y="485" class="tiny" text-anchor="middle">
        A média geométrica é a taxa única que, aplicada
      </text>
      <text x="300" y="510" class="tiny" text-anchor="middle">
        nos quatro anos, gera o mesmo resultado total.
      </text>
    </g>
  </g>

  <!-- ============ PAINEL DIREITO: TRAJETÓRIAS DE VALOR ============ -->
  <g id="panel-paths" transform="translate(600, 0)">
    <!-- Moldura -->
    <rect x="20" y="20" width="540" height="510" class="u-panel u-stroke"/>

    <!-- Cabeçalho -->
    <text x="300" y="60" class="label">Crescimento acumulado</text>
    <text x="300" y="85" class="u-small" text-anchor="middle">
      Valor do investimento: taxas variadas vs. constante
    </text>

    <!-- Corpo -->
    <g transform="translate(-10,-10)">
      <!-- Eixos (valores entre 100 e 160)
           Escala vertical: 1 unidade = 5 px
           y(V) = 440 − (V − 100)*5
           100 → 440; 120 → 340; 140 → 240; 160 → 140
      -->
      <g class="u-stroke" style="stroke-width:2.5">
        <line x1="80" y1="440" x2="520" y2="440"/>  <!-- eixo X -->
        <line x1="80" y1="440" x2="80" y2="140"/>   <!-- eixo Y -->
      </g>

      <!-- Grades + labels do eixo Y (valores do investimento) -->
      <g class="u-stroke u-small" opacity=".2" style="stroke-width:1">
        <!-- 100 -->
        <line x1="80" y1="440" x2="520" y2="440"/>
        <text x="68" y="444" text-anchor="end">100</text>
        <!-- 120 -->
        <line x1="80" y1="340" x2="520" y2="340"/>
        <text x="68" y="344" text-anchor="end">120</text>
        <!-- 140 -->
        <line x1="80" y1="240" x2="520" y2="240"/>
        <text x="68" y="244" text-anchor="end">140</text>
        <!-- 160 -->
        <line x1="80" y1="140" x2="520" y2="140"/>
        <text x="68" y="144" text-anchor="end">160</text>
      </g>

      <!-- Ticks e rótulos no eixo X (anos 0 a 4) -->
      <g class="u-stroke">
        <line x1="80"  y1="440" x2="80"  y2="446"/>
        <line x1="190" y1="440" x2="190" y2="446"/>
        <line x1="300" y1="440" x2="300" y2="446"/>
        <line x1="410" y1="440" x2="410" y2="446"/>
        <line x1="520" y1="440" x2="520" y2="446"/>
      </g>
      <g class="u-small" opacity=".8">
        <text x="80"  y="462" text-anchor="middle">0</text>
        <text x="190" y="462" text-anchor="middle">1</text>
        <text x="300" y="462" text-anchor="middle">2</text>
        <text x="410" y="462" text-anchor="middle">3</text>
        <text x="520" y="462" text-anchor="middle">4</text>
      </g>

      <!-- TRAJETÓRIAS COM VALORES REAIS
           Escala: y(V) = 440 − (V − 100)*5
           Real (fatores 1,2; 1,1; 0,9; 1,3):
             100 → 120 → 132 → 118,8 → 154,44
             y(100)=440; y(120)=340; y(132)=280; y(118,8)=346; y(154,44)≈167,8
           Geo (taxa constante ≈ 11,5%):
             100 → 111,5 → 124,3 → 138,5 → 154,44
             y(111,5)=382,5; y(124,3)=318,5; y(138,5)=247,5
      -->
      <path class="u-stroke path-real" style="stroke-width:3"
            d="M 80 440
               L 190 340
               L 300 280
               L 410 346
               L 520 167.8"/>

      <path class="u-stroke path-geo" style="stroke-width:3"
            d="M 80 440
               L 190 382.5
               L 300 318.5
               L 410 247.5
               L 520 167.8"/>

      <!-- Pontos da trajetória real -->
      <circle cx="80"  cy="440"   r="6" class="dot d1"/>
      <circle cx="190" cy="340"   r="6" class="dot d2"/>
      <circle cx="300" cy="280"   r="6" class="dot d3"/>
      <circle cx="410" cy="346"   r="6" class="dot d4"/>
      <circle cx="520" cy="167.8" r="6" class="dot d5"/>

      <!-- Pontos da trajetória geométrica (círculos vazados) -->
      <circle cx="80"  cy="440"   r="5" class="dot dot-geo d1"/>
      <circle cx="190" cy="382.5" r="5" class="dot dot-geo d2"/>
      <circle cx="300" cy="318.5" r="5" class="dot dot-geo d3"/>
      <circle cx="410" cy="247.5" r="5" class="dot dot-geo d4"/>
      <circle cx="520" cy="167.8" r="5" class="dot dot-geo d5"/>

      <!-- Rótulo do ponto final -->
      <text x="505" y="140" class="leg" text-anchor="middle" >Mesmo valor</text>
      <text x="510" y="157" class="leg" text-anchor="middle" >final</text>
    </g>

    <!-- Rodapé (legenda das trajetórias + explicação) -->
    <g>
      <text x="300" y="480" class="tiny" text-anchor="middle">
        Linha contínua: valores com fatores 1,2; 1,1; 0,9; 1,3
      </text>
      <text x="300" y="500" class="tiny" text-anchor="middle">
        Linha pontilhada: taxa constante (média geométrica)
      </text>
      <text x="300" y="520" class="tiny" text-anchor="middle">
        Ambas levam 100 ao mesmo valor final 154,44
      </text>
    </g>
  </g>
</svg>
