<!-- ===========================================
   MÉDIA PARA DADOS AGRUPADOS — Tabela + Histograma
   Padrão unificado (u-*/a-*) — CSS-only animations
   =========================================== -->
<svg viewBox="0 0 1500 780" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="title desc">
  <title id="title">Média para dados agrupados em classes</title>
  <desc id="desc">
    À esquerda, tabela com intervalos de classe, pontos médios, frequências e produtos f_j × m_j.
    À direita, histograma com as mesmas frequências e uma linha vertical pontilhada indicando
    a média para dados agrupados, obtida pela expressão soma de f_j m_j dividida pela
    soma das frequências.
  </desc>

  <defs>
    <style>
      :root{
        --ink:#111827;
        --font:"et-book","ETBook","Georgia",serif;
        --cycle:7s;
        --ease:ease-in-out;
      }

      text{
        font-family:var(--font);
        fill:var(--ink);
        user-select:none;
      }
      .u-stroke{
        stroke:var(--ink);
        fill:none;
        stroke-linecap:round;
        stroke-linejoin:round;
      }
      .u-panel{
        stroke-width:2;
        rx:12;
      }
      .label{
        font-size:34px;
        font-weight:600;
        text-anchor:middle;
      }
      .small{ font-size:18px }

      /* Subscritos (para j, agr etc.) */
      .subscript{
        font-size:12px;   /* relativo ao contexto (small, header, label) */
        font-weight:600;
      }

      /* ====== Animações: destaque de linha da tabela ====== */
      @keyframes rowHi{
        0%,10%{opacity:0}
        15%,25%{opacity:.18}
        30%,100%{opacity:0}
      }
      .row-hi{ fill:var(--ink); opacity:0 }
      .r1{ animation:rowHi 6s var(--ease) infinite 0s }
      .r2{ animation:rowHi 6s var(--ease) infinite .6s }
      .r3{ animation:rowHi 6s var(--ease) infinite 1.2s }
      .r4{ animation:rowHi 6s var(--ease) infinite 1.8s }
      .r5{ animation:rowHi 6s var(--ease) infinite 2.4s }

      /* ====== Barras do histograma ====== */
      @keyframes grow{
        0%{ transform:scaleY(0) }
        18%,82%{ transform:scaleY(1) }
        100%{ transform:scaleY(0) }
      }
      .bar{
        fill:var(--ink);
        transform-box:fill-box;
        transform-origin:bottom;
        transform:scaleY(0);
      }
      .b1{ animation:grow var(--cycle) var(--ease) infinite 0s }
      .b2{ animation:grow var(--cycle) var(--ease) infinite .15s }
      .b3{ animation:grow var(--cycle) var(--ease) infinite .30s }
      .b4{ animation:grow var(--cycle) var(--ease) infinite .45s }
      .b5{ animation:grow var(--cycle) var(--ease) infinite .60s }

      /* ====== Linha da média agrupada (vertical) ====== */
      .u-mean-line{
        stroke:var(--ink);
        stroke-width:2;
        stroke-dasharray:260;    /* >= comprimento vertical da linha */
        stroke-dashoffset:260;
        opacity:.9;
        animation:meanLine var(--cycle) var(--ease) infinite;
      }

      /* grupo da label animada (X̄_agr ≈ 25,8) */
      .mean-label{
        opacity:0;
        animation:meanLabel var(--cycle) var(--ease) infinite;
      }

      .mean-label-main{
        font-size:16px;
        font-weight:600;
        text-anchor:start;
      }

      @keyframes meanLine{
        0%{   stroke-dashoffset:260; opacity:0 }
        20%,65%{ stroke-dashoffset:0;   opacity:1 }
        85%,100%{ stroke-dashoffset:260; opacity:0 }
      }

      @keyframes meanLabel{
        0%,25%{ opacity:0 }
        35%,70%{ opacity:1 }
        85%,100%{ opacity:0 }
      }

      @media (prefers-reduced-motion:reduce){
        .row-hi{ animation:none; opacity:.12 }
        .bar{ animation:none; transform:scaleY(1) }
        .u-mean-line{ animation:none; stroke-dashoffset:0; opacity:1 }
        .mean-label{ animation:none; opacity:1 }
      }
    </style>
  </defs>

  <!-- ================= PAINEL ESQUERDO: TABELA ================= -->
  <g id="panel-table" transform="translate(-140,-200) scale(1.2)">
    <g class="p-panel">
      <!-- Moldura -->
      <rect x="120" y="230" width="540" height="510" class="u-panel u-stroke"/>

      <!-- ==== Cabeçalho da tabela ==== -->
      <g class="p-header">
        <text x="390" y="280" class="label">Média para dados agrupados</text>

        <!-- Linha com m_j e f_j com subscript fake -->
        <g class="small">
          <text x="150" y="308">Intervalos de classe, pontos médios </text>
          <!-- m_j -->
          <text x="437" y="308">m</text>
          <text x="455" y="312" class="subscript">j</text>

          <text x="465" y="308"> e frequências </text>
          <!-- f_j -->
          <text x="580" y="308">f</text>
          <text x="592" y="312" class="subscript">j</text>
        </g>
      </g>

      <!-- ==== Corpo da tabela ==== -->
      <g class="p-body" transform="translate(0,24)">
        <!-- Cabeçalho das colunas -->
        <line x1="160" y1="364" x2="620" y2="364" class="u-stroke" style="stroke-width:2"/>

        <g font-size="20" font-weight="700">
          <text x="175" y="352">Classe</text>

          <!-- "Ponto médio m_j" -->
          <text x="345" y="352">m</text>
          <text x="367" y="356" class="subscript">j</text>

          <!-- "Frequência f_j" -->
          <text x="485" y="352">f</text>
          <text x="495" y="356" class="subscript">j</text>

          <!-- "f_j × m_j" -->
          <text x="570" y="352">f</text>
          <text x="580" y="356" class="subscript">j</text>
          <text x="590" y="352">×</text>
          <text x="610" y="352">m</text>
          <text x="635" y="356" class="subscript">j</text>
        </g>

        <!-- Linhas horizontais -->
        <g class="u-stroke">
          <line x1="160" y1="404" x2="620" y2="404"/>
          <line x1="160" y1="444" x2="620" y2="444"/>
          <line x1="160" y1="484" x2="620" y2="484"/>
          <line x1="160" y1="524" x2="620" y2="524"/>
          <line x1="160" y1="564" x2="620" y2="564"/>
          <line x1="160" y1="604" x2="620" y2="604"/>
        </g>

        <!-- Destaques animados por linha -->
        <rect x="160" y="374" width="460" height="30" class="row-hi r1"/>
        <rect x="160" y="414" width="460" height="30" class="row-hi r2"/>
        <rect x="160" y="454" width="460" height="30" class="row-hi r3"/>
        <rect x="160" y="494" width="460" height="30" class="row-hi r4"/>
        <rect x="160" y="534" width="460" height="30" class="row-hi r5"/>

        <!-- Dados da tabela (exemplo) -->
        <g font-size="19">
          <text x="175" y="396">[0, 10)</text>
          <text x="355" y="396" text-anchor="end">5</text>
          <text x="495" y="396" text-anchor="end">5</text>
          <text x="610" y="396" text-anchor="end">25</text>

          <text x="175" y="436">[10, 20)</text>
          <text x="355" y="436" text-anchor="end">15</text>
          <text x="495" y="436" text-anchor="end">8</text>
          <text x="610" y="436" text-anchor="end">120</text>

          <text x="175" y="476">[20, 30)</text>
          <text x="355" y="476" text-anchor="end">25</text>
          <text x="495" y="476" text-anchor="end">12</text>
          <text x="610" y="476" text-anchor="end">300</text>

          <text x="175" y="516">[30, 40)</text>
          <text x="355" y="516" text-anchor="end">35</text>
          <text x="495" y="516" text-anchor="end">9</text>
          <text x="610" y="516" text-anchor="end">315</text>

          <text x="175" y="556">[40, 50)</text>
          <text x="355" y="556" text-anchor="end">45</text>
          <text x="495" y="556" text-anchor="end">6</text>
          <text x="610" y="556" text-anchor="end">270</text>

          <text x="175" y="596" font-weight="700">Totais</text>
          <text x="355" y="596" text-anchor="end">—</text>
          <text x="495" y="596" text-anchor="end" font-weight="700">40</text>
          <text x="610" y="596" text-anchor="end" font-weight="700">1030</text>
        </g>
      </g>

      <!-- ==== Rodapé ==== -->
      <g class="p-footer">
        <text x="390" y="670" class="small" text-anchor="middle">
          A média para dados agrupados usa os pontos médios como 
        </text>

        <!-- Linha com X̄_agr e Σ f_j m_j / Σ f_j -->
        <g class="small">
          <text x="160" y="697">aproximação e calcula:</text>
          
          <g transform="translate(40,3)">
          <!-- X̄_agr -->
          <text x="310" y="694">X̄</text>
          <text x="324" y="698" class="subscript">agr</text>

          <text x="350" y="694">= </text>

          <!-- f_j -->
          <text x="375" y="694">(Σ</text>
          <text x="400" y="694">f</text>

          <text x="410" y="698" class="subscript">j</text>

          <text x="422" y="694"> · </text>
          <text x="440" y="694">m</text>
          <text x="460" y="698" class="subscript">j</text>
          <text x="470" y="694">) / (Σ </text>

          <!-- f_j no denominador -->
          <text x="520" y="694">f</text>
          <text x="530" y="698" class="subscript">j</text>
          <text x="538" y="694">).</text>
          </g>
        </g>
      </g>
    </g>
  </g>

  <!-- ================= PAINEL DIREITO: HISTOGRAMA ================= -->
  <g id="panel-hist" transform="translate(-220,-200) scale(1.2)">
    <g class="p-panel">
      <!-- Moldura -->
      <rect x="840" y="230" width="580" height="510" class="u-panel u-stroke"/>

      <!-- ==== Cabeçalho ==== -->
      <g class="p-header">
        <text x="1128" y="280" class="label">Histograma e média agrupada</text>

        <!-- Frase + X̄_agr abaixo -->
        <text x="1128" y="308" class="small" text-anchor="middle">
          Frequências por classe e posição da média
        </text>

      </g>

      <!-- ==== Corpo: eixos + barras ==== -->
      <g class="p-body" transform="translate(0,-40)">
        <!-- Eixos -->
        <g class="u-stroke" style="stroke-width:2.5">
          <line x1="890" y1="670" x2="1380" y2="670"/>
          <line x1="890" y1="670" x2="890" y2="400"/>
        </g>

        <!-- Grades Y (0,5,10,15) -->
        <g class="u-stroke small" opacity=".5">
          <line x1="890" y1="670" x2="1380" y2="670"/><text x="872" y="674" text-anchor="end">0</text>
          <line x1="890" y1="620" x2="1380" y2="620"/><text x="872" y="624" text-anchor="end">5</text>
          <line x1="890" y1="570" x2="1380" y2="570"/><text x="872" y="574" text-anchor="end">10</text>
          <line x1="890" y1="520" x2="1380" y2="520"/><text x="872" y="524" text-anchor="end">15</text>
        </g>

        <!-- Barras para as frequências f_j (escala ~10px por unidade) -->
        <!-- f = [5,8,12,9,6] -->
        <rect x="910"  y="620" width="70" height="50"  class="bar b1"/>
        <rect x="1005" y="540" width="70" height="130" class="bar b2"/>
        <rect x="1100" y="500" width="70" height="170" class="bar b3"/>
        <rect x="1195" y="530" width="70" height="140" class="bar b4"/>
        <rect x="1290" y="610" width="70" height="60"  class="bar b5"/>

        <!-- Linha vertical da média agrupada (≈ 25,8) -->
        <line x1="1135" y1="400" x2="1135" y2="670" class="u-mean-line"/>

        <!-- Label com subscript: X̄_agr ≈ 25,8 -->
        <g class="mean-label">
          <text x="1140" y="412" class="mean-label-main">X̄</text>
          <text x="1154" y="416" class="mean-label-main subscript">agr</text>
          <text x="1192" y="412" class="mean-label-main">≈ 25,8</text>
        </g>
      </g>

        <!-- ==== Rodapé: rótulos das classes ==== -->
        <g class="p-footer small" transform="translate(0,-40)">
        <!-- rótulos das classes -->
        <text x="945"  y="695" text-anchor="middle">[0, 10)</text>
        <text x="1040" y="695" text-anchor="middle">[10, 20)</text>
        <text x="1135" y="695" text-anchor="middle">[20, 30)</text>
        <text x="1230" y="695" text-anchor="middle">[30, 40)</text>
        <text x="1325" y="695" text-anchor="middle">[40, 50)</text>

        <!-- frase com subscript f_j -->
        <g transform="translate(-220, 10)">
            <text x="1070" y="725" text-anchor="start">
            A altura de cada retângulo mostra f
            </text>
            <text x="1352" y="729" class="subscript">j</text>
            <text x="1360" y="725" text-anchor="start">
            ; a linha marca a média agrupada.
            </text>
        </g>
        </g>

    </g>
  </g>
</svg>
