/* =========================================================
   ESTATÍSTICA INTERATIVA — CSS PRINCIPAL (depurado)
   Observação: CSS do KG/KaTeX em arquivo separado.
   ========================================================= */

/* ========== Variáveis Globais ========== */
:root{
  --fg:#111827;
  --muted:#4b5563;
  --accent:#1f2937;
  --accentFg:#fff;
  --text:#222;
  --max-width:900px;
  --content-width:780px;
  --figure-desktop-width:640px;
  --figure-desktop-offset:54px;
  --border-light:#e5e7eb;
  --border-medium:#6b7280;
}

/* ========== Base mínima ========== */
html,body{height:100%}
body{color:var(--text); background:#fff; -webkit-text-size-adjust:100%}
body.loading{visibility:hidden; opacity:0}
body.ready{visibility:visible; opacity:1; transition:opacity .35s ease}

/* ========== Página inicial (hero) — restaurada ========== */
body.index-page{
  /* reset da moldura padrão só na capa */
  margin: 0;
  padding: 0;

  /* como estava antes */
  padding-left: 0;
  margin-left: 0;
  width: 100%;
  max-width: 100%;
  background: #fff;
  overflow: hidden;          /* capa sem scroll */
  height: 100vh;             /* exatamente 100vh */
  touch-action: none;
  overscroll-behavior: none;
}

.hero{
  position: relative;
  z-index: 1;
  height: 100%;
  display: grid;
  place-items: center;
  padding: 24px;
}

/* (mantém os estilos originais destes elementos) */
.card{ text-align:center; padding:40px 28px; border-radius:14px; }
.cta{
  display:inline-block; padding:12px 18px; border-radius:10px;
  background: var(--accent); color: var(--accentFg);
  text-decoration:none; font-weight:700;
  transition: transform .12s ease, opacity .12s ease;
}
.cta:hover{ transform: translateY(-1px); opacity: .95; }
.cta:active{ transform: none; opacity: .9; }
.autor{
  font-size:14px; color:#555; margin-top:4px; font-style:italic;
  text-align:right; max-width:260px; margin-left:auto;
}


/* ========== Navegação entre capítulos ========== */
.nav-links{
  margin:60px auto 0; padding-top:25px; border-top:1px solid #bfbfbf;
  display:flex; justify-content:space-between; align-items:center;
  max-width:var(--max-width); font-size:16px; font-family:Georgia,serif
}
.nav-links a{color:#333; text-decoration:none; padding:6px 8px; border-bottom:1px solid transparent}
.nav-links a:hover{border-bottom-color:#000}
.nav-links .anterior{flex:1; text-align:left}
.nav-links .sumario{flex:1; text-align:center}
.nav-links .proximo{flex:1; text-align:right}

/* ========== Layout do livro ========== */
body.textbook{
  max-width:var(--max-width); margin:0 auto; padding:60px 32px 40px; line-height:1.7;
  font-family:et-book,"Palatino Linotype",serif; background:#fff
}

/* Títulos (tamanhos estáveis e legíveis) */
body.textbook h1{font-size:2.6rem; font-weight:400; line-height:1.2; margin:0 0 1.8rem}
body.textbook h2{font-size:1.9rem; font-weight:400; line-height:1.35; margin:3.5rem 0 1.2rem}
body.textbook h3{font-size:1.4rem; font-weight:700; line-height:1.35; margin:2.3rem 0 1rem 1rem}
body.textbook .subtitle{font-size:1rem; font-weight:700; color:#555; margin:1rem 0 0; letter-spacing:.04em; text-transform:uppercase}

/* Texto e listas */
body.textbook p, body.textbook li{max-width:var(--content-width); text-align:justify}
body.textbook p{font-size:1.13rem; margin:0 0 1.4rem}
body.textbook ul, body.textbook ol{margin:0 0 1rem 1.2rem; padding:0}
body.textbook li{margin:0 0 .8rem}
body.textbook .newthought{font-variant:small-caps; font-size:1.28rem; letter-spacing:.03em}

/* =========================================================
   FIGURAS & MÍDIAS
   ========================================================= */
.figure, figure.figure{
  display:block; max-width:var(--content-width); margin:2rem auto 1.2rem; text-align:center
}
.figure > img, figure.figure > img,
.figure > svg, figure.figure > svg{
  display:block; margin:0 auto; max-width:100%; height:auto
}
.figure > figcaption, figure.figure > figcaption{
  font-style:italic; font-size:1.3rem; margin-top:.1rem; color:#444
}

/* Utilitários leves para controle via HTML */
.center{margin-left:auto !important; margin-right:auto !important; text-align:center}
.left{margin-right:auto !important; text-align:left}
.right{margin-left:auto !important; text-align:right}
.w-full{max-width:100% !important; width:100% !important}
.w-wide{max-width:var(--max-width) !important}
.w-narrow{max-width:640px !important}

/* =========================================================
   TABELAS (reaproveitam o box de figure)
   ========================================================= */

figure.figure.table table{
  width:100%; border-collapse:collapse; table-layout:fixed; font-size:1.02rem; margin:0 auto
}
figure.figure.table th, figure.figure.table td{
  padding:10px 14px; border-bottom:1px solid var(--border-light); text-align:left; line-height:1.55; overflow-wrap:break-word
}
figure.figure.table thead th{font-weight:600; border-bottom:2px solid var(--border-medium)}
figure.figure.table figcaption{display:block; margin-top:8px; font-style:italic; text-align:center; color:var(--muted); font-size:.95rem}

/* Tabelas numéricas: centraliza números; 1ª coluna à esquerda */
figure.figure.table.data th, figure.figure.table.data td{text-align:center}
figure.figure.table.data th:first-child,
figure.figure.table.data td:first-child{text-align:left; white-space:normal}
figure.figure.table.data tbody td:not(:first-child){white-space:nowrap}

/* =========================================================
   KG / KaTeX (tamanhos simples e container seguro)
   ========================================================= */
/* KGJS container sizing allows inline overrides via --kg-max-width */
.kg-container{
  --kg-max-width:var(--content-width);
  --kg-mobile-max-width:100%;
  --kg-current-width:var(--kg-max-width);
  --kg-padding:8px 6px;
  width:min(100%, var(--kg-current-width));
  max-width:min(100%, var(--kg-current-width));
  margin:0 auto;
  padding:var(--kg-padding);
  background:#fff;
  border-radius:6px;
  overflow-x:auto;
  -webkit-overflow-scrolling:touch
}
.kg-container.kg-compact{--kg-max-width:320px}
.kg-container.kg-medium{--kg-max-width:420px}
.kg-container.kg-wide{--kg-max-width:560px}
.kg-container.kg-fill{--kg-max-width:100%}
.kg-container canvas, .kg-container svg, .kg-container img{
  max-width:100%;
  width:100% !important;
  height:auto;
  display:block
}

/* tamanhos KaTeX (leves) */
body.textbook .katex{font-size:1.12em}
body.textbook .katex-display{font-size:1.2em; margin: 0 0}

/* Linha de sliders (simples e adaptável) */
.kg-slider-row{display:flex; flex-wrap:wrap; align-items:center; gap:8px 12px}

@media (min-width:769px){
  .figure:not(.fullwidth), figure.figure:not(.fullwidth){
    max-width:min(var(--figure-desktop-width), var(--content-width));
    margin-left:var(--figure-desktop-offset);
    margin-right:auto;
  }
  .figure:not(.fullwidth) > img,
  .figure:not(.fullwidth) > svg,
  figure.figure:not(.fullwidth) > img,
  figure.figure:not(.fullwidth) > svg{
    width:100%;
  }
  .figure:not(.fullwidth) > figcaption,
  figure.figure:not(.fullwidth) > figcaption{
    margin-top:.1rem;
  }
  .figure.figure--inline{
    margin-left:var(--figure-desktop-offset);
    margin-right:auto;
  }
  figure.figure.table{
    margin-left:var(--figure-desktop-offset);
    margin-right:auto;
    max-width:min(var(--figure-desktop-width), var(--content-width));
  }
  figure.figure.table table{margin-left:0; margin-right:auto;}
}

/* =========================================================
   RESPONSIVO
   ========================================================= */
@media (max-width:768px){

  /* Escala mais contida para se aproximar de ~80% */
  html{font-size:12px}
  body.textbook{max-width:100%; padding:10px 10px; line-height:1.5}

  /* Títulos menos altos no mobile */
  body.textbook h1{font-size:1.8rem; line-height:1.22; margin:0 0 .7rem}
  body.textbook h2{font-size:1.6rem; line-height:1.24; margin:1.1rem 0 .5rem}
  body.textbook h3{font-size:1rem; margin:2.5rem .5rem 1rem}

  /* Texto e listas ~10% menores */
  body.textbook p,
  body.textbook ul,
  body.textbook ol{
    font-size:.9rem;
    margin-bottom:.75rem
  }
  body.textbook p{text-justify:inter-word; hyphens:auto}
  body.textbook ul,
  body.textbook ol{
    margin:1.5rem 0 1.5rem 16px;
    padding-left:0
  }
  body.textbook li{
    margin-bottom:.5rem;
    text-align:left;
    hyphens:auto
  }

  /* Imagens e figuras ocupam largura total */
  body.textbook img,
  body.textbook svg{
    max-width:100%;
    height:auto;
    display:block;
    margin:.55rem auto
  }
  .figure,
  figure.figure{
    max-width:100%;
    margin:1rem auto
  }
  .figure > figcaption,
  figure.figure > figcaption{
    font-size:.78rem;
    margin-top:.08rem
  }

  /* Navegação entre capítulos compacta no mobile */
  .nav-links{
    font-size:14px;
    margin:40px auto 0;
    padding-top:18px
  }

  /* Tabelas: cabem na tela com quebra no cabeçalho */
  figure.figure.table{
    width:100%;
    overflow-x:auto;
    -webkit-overflow-scrolling:touch
  }
  figure.figure.table table{font-size:.8rem}
  figure.figure.table thead th{
    white-space:normal;
    font-size:.7rem;
    word-break:break-word;
    hyphens:auto;
    padding:6px 8px
  }
  figure.figure.table tbody td{padding:5px 8px}
  figure.figure.table.data tbody td:not(:first-child){white-space:nowrap}

  /* KaTeX proporcional ao texto */
  body.textbook .katex{font-size:1.2em}
  body.textbook .katex-display{font-size:1.3em}
}
/* =========================================================
   KGJS — Ajuste real de tamanho (wrapper controla o espaço)
   ========================================================= */

.kg-wrapper {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;         /* aumenta o tamanho real do gráfico */
  max-width: 620px;   /* trava o limite em telas largas */
  margin: 1rem auto 1rem;
  transform: scale(1); /* opcional: remove resquícios */
  transform-origin: top center;
}

.kg-container {
  width: 100%;
  max-width: 100%;
  overflow: visible;
}

.kg-container svg {
  width: 100% !important;
  height: auto !important;
  display: block;
}

/* =============================
   MOBILE — ajuste proporcional
   ============================= */
@media (max-width: 768px) {
  /* Centralização e ajuste fino do gráfico */
  .kg-wrapper {
    width: 125%;
    max-width: none;
    margin: 1.2rem auto 2.5rem;
    transform: translateX(-15.3%);
  }
}



/* =========================================================
   Botões de scroll (mobile)
   ========================================================= */
.scroll-buttons{
  position:fixed;
  bottom:calc(16px + env(safe-area-inset-bottom));
  right:16px;
  display:flex;
  flex-direction:column;
  gap:8px;
  z-index:1000;
  opacity:0;
  visibility:hidden;
  transform:translateY(6px);
  transition:opacity .25s ease, visibility .25s ease, transform .25s ease
}
.scroll-buttons.show{opacity:1; visibility:visible; transform:none}
.scroll-buttons button{
  width:44px;
  height:44px;
  border:1px solid rgba(255,255,255,.12);
  border-radius:8px;
  background:rgba(31,41,55,.55);
  color:var(--accentFg);
  font-size:1.15rem;
  font-weight:700;
  display:grid;
  place-items:center;
  line-height:1;
  padding:0;
  box-shadow:0 1px 2px rgba(0,0,0,.06);
  opacity:.95;
  -webkit-tap-highlight-color:transparent;
  touch-action:manipulation;
  transition:opacity .2s ease, transform .2s ease, box-shadow .2s ease
}
.scroll-buttons button:hover{opacity:1}
.scroll-buttons button:active{transform:translateY(1px); box-shadow:none}
@media (min-width:769px){.scroll-buttons{display:none}}
@media (prefers-reduced-motion:reduce){
  .scroll-buttons,
  .scroll-buttons.show,
  .scroll-buttons button{transition:none !important}
}
