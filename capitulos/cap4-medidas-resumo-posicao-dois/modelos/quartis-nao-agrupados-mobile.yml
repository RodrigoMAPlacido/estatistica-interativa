
schema: EconSchema
aspectRatio: 2

params:
  - name: x_1
    value: 5
    min: 5
    max: 15
    round: 0.1
  - name: x_2
    value: 6
    min: 5
    max: 15
    round: 0.1
  - name: x_3
    value: 7
    min: 5
    max: 15
    round: 0.1
  - name: x_4
    value: 8
    min: 5
    max: 15
    round: 0.1
  - name: x_5
    value: 9
    min: 5
    max: 15
    round: 0.1
  - name: x_6
    value: 10
    min: 5
    max: 15
    round: 0.1
  - name: x_7
    value: 12
    min: 5
    max: 15
    round: 0.1
  - name: x_8
    value: 15
    min: 5
    max: 15
    round: 0.1

calcs:
  # Quartis para n=8 (assumindo ordem mantida)
  Q1: "((params.x_2 + params.x_3) / 2)"
  Q2: "((params.x_4 + params.x_5) / 2)"
  Q3: "((params.x_6 + params.x_7) / 2)"

colors:
  ink: "'#111827'"
  inkSoft: "'#64748b'"
  accent: "'#64748b'"
  bg: "'#ffffff'"
  point: "'#1f77b4'"

layout:
  OneWideGraphPlusSidebar:

    graph:
      xAxis:
        min: 5
        max: 15
        ticks: 0
        title: Quartis com pontos arrastáveis
      yAxis:
        show: false
        min: -1
        max: 1
        ticks: 0

      objects:
        # ---------------------------
        # Reta numérica
        # ---------------------------
        - Segment:
            a: [5, 0]
            b: [15, 0]
            color: colors.ink
            strokeWidth: 3

        # ticks (opcional)

        - Segment:
            a: [5, -0.08]
            b: [5,  0.08]
            color: colors.ink
            strokeWidth: 2

        - Segment:
            a: [15, -0.08]
            b: [15,  0.08]
            color: colors.ink
            strokeWidth: 2

        - Label:
            coordinates: [5, -0.25]
            text: "'5'"
            color: colors.inkSoft
            fontSize: 10
            position: c

        - Label:
            coordinates: [15, -0.25]
            text: "'15'"
            color: colors.inkSoft
            fontSize: 10
            position: c

        # ---------------------------
        # Retas verticais dos quartis
        # ---------------------------
        - Segment:
            a: [calcs.Q1, -0.70]
            b: [calcs.Q1,  0.70]
            color: colors.accent
            strokeWidth: 2
            lineStyle: dashed

        - Segment:
            a: [calcs.Q2, -0.80]
            b: [calcs.Q2,  0.80]
            color: colors.accent
            strokeWidth: 2

        - Segment:
            a: [calcs.Q3, -0.70]
            b: [calcs.Q3,  0.70]
            color: colors.accent
            strokeWidth: 2
            lineStyle: dotted

        # Labels Q1/Q2/Q3 e valores
        - Label:
            coordinates: [calcs.Q1, 0.84]
            text: "`\\\\bf{Q_1}`"
            bgcolor: colors.bg
            color: colors.ink
            fontSize: 10
            position: c
        - Label:
            coordinates: [calcs.Q1, 0.8]
            text: "`${calcs.Q1.toFixed(2)}`"
            bgcolor: colors.bg
            color: colors.inkSoft
            fontSize: 9
            position: t

        - Label:
            coordinates: [calcs.Q2, 0.84]
            text: "`\\\\bf{Q_2}`"
            bgcolor: colors.bg
            color: colors.ink
            fontSize: 10
            position: c
        - Label:
            coordinates: [calcs.Q2, 0.8]
            text: "`${calcs.Q2.toFixed(2)}`"
            bgcolor: colors.bg
            color: colors.inkSoft
            fontSize: 9
            position: t
        - Label:
            coordinates: [calcs.Q2, 0.6]
            text: "'(mediana)'"
            bgcolor: colors.bg
            color: colors.inkSoft
            fontSize: 8
            position: t

        - Label:
            coordinates: [calcs.Q3, 0.84]
            text: "`\\\\bf{Q_3}`"
            bgcolor: colors.bg
            color: colors.ink
            fontSize: 10
            position: c
        - Label:
            coordinates: [calcs.Q3, 0.8]
            text: "`${calcs.Q3.toFixed(2)}`"
            bgcolor: colors.bg
            color: colors.inkSoft
            fontSize: 9
            position: t

        # percentuais (opcional)

        - Label:
            coordinates: [calcs.Q1, -0.8]
            text: "'25\\\\%'"
            color: colors.inkSoft
            fontSize: 9
            position: c

        - Label:
            coordinates: [calcs.Q2, -0.8]
            text: "'50\\\\%'"
            color: colors.inkSoft
            fontSize: 9
            position: c

        - Label:
            coordinates: [calcs.Q3, -0.8]
            text: "'75\\\\%'"
            color: colors.inkSoft
            fontSize: 9
            position: c

        # ---------------------------
        # PONTOS (Point) com drag horizontal + clamp (sem cruzar)
        # ---------------------------

        - Point:
            coordinates: [params.x_1, 0]
            color: colors.ink
            drag:
              - directions: x
                param: x_1
                expression: "((drag.x >= 5) ? ((drag.x <= params.x_2) ? drag.x : params.x_2) : 5)"

        - Point:
            coordinates: [params.x_2, 0]
            color: colors.inkSoft
            drag:
              - directions: x
                param: x_2
                expression: "((drag.x >= params.x_1) ? ((drag.x <= params.x_3) ? drag.x : params.x_3) : params.x_1)"

        - Point:
            coordinates: [params.x_3, 0]
            color: colors.ink
            drag:
              - directions: x
                param: x_3
                expression: "((drag.x >= params.x_2) ? ((drag.x <= params.x_4) ? drag.x : params.x_4) : params.x_2)"

        - Point:
            coordinates: [params.x_4, 0]
            color: colors.inkSoft
            drag:
              - directions: x
                param: x_4
                expression: "((drag.x >= params.x_3) ? ((drag.x <= params.x_5) ? drag.x : params.x_5) : params.x_3)"

        - Point:
            coordinates: [params.x_5, 0]
            color: colors.ink
            drag:
              - directions: x
                param: x_5
                expression: "((drag.x >= params.x_4) ? ((drag.x <= params.x_6) ? drag.x : params.x_6) : params.x_4)"

        - Point:
            coordinates: [params.x_6, 0]
            color: colors.inkSoft
            drag:
              - directions: x
                param: x_6
                expression: "((drag.x >= params.x_5) ? ((drag.x <= params.x_7) ? drag.x : params.x_7) : params.x_5)"

        - Point:
            coordinates: [params.x_7, 0]
            color: colors.ink
            drag:
              - directions: x
                param: x_7
                expression: "((drag.x >= params.x_6) ? ((drag.x <= params.x_8) ? drag.x : params.x_8) : params.x_6)"

        - Point:
            coordinates: [params.x_8, 0]
            color: colors.inkSoft
            drag:
              - directions: x
                param: x_8
                expression: "((drag.x >= params.x_7) ? ((drag.x <= 15) ? drag.x : 15) : params.x_7)"

        # rótulos dos valores (alternando cima/baixo pra não embolar)

        - Label:
            coordinates: [params.x_1, 0.18]
            text: "`${params.x_1.toFixed(1)}`"
            color: colors.inkSoft
            fontSize: 9
            position: c
            bgcolor: colors.bg
            show: (params.x_1>5)

        - Label:
            coordinates: [params.x_2, -0.18]
            text: "`${params.x_2.toFixed(1)}`"
            color: colors.inkSoft
            fontSize: 9
            position: c
            bgcolor: colors.bg

        - Label:
            coordinates: [params.x_3, 0.18]
            text: "`${params.x_3.toFixed(1)}`"
            color: colors.inkSoft
            fontSize: 9
            position: c
            bgcolor: colors.bg

        - Label:
            coordinates: [params.x_4, -0.18]
            text: "`${params.x_4.toFixed(1)}`"
            color: colors.inkSoft
            fontSize: 9
            position: c
            bgcolor: colors.bg

        - Label:
            coordinates: [params.x_5, 0.18]
            text: "`${params.x_5.toFixed(1)}`"
            color: colors.inkSoft
            fontSize: 9
            position: c
            bgcolor: colors.bg

        - Label:
            coordinates: [params.x_6, -0.18]
            text: "`${params.x_6.toFixed(1)}`"
            color: colors.inkSoft
            fontSize: 9
            position: c
            bgcolor: colors.bg

        - Label:
            coordinates: [params.x_7, 0.18]
            text: "`${params.x_7.toFixed(1)}`"
            color: colors.inkSoft
            fontSize: 9
            position: c
            bgcolor: colors.bg

        - Label:
            coordinates: [params.x_8, -0.18]
            text: "`${params.x_8.toFixed(1)}`"
            color: colors.inkSoft
            fontSize: 9
            position: c
            bgcolor: colors.bg
            show: (params.x_8<15)

    sidebar:
      triggerWidth: 9999
      controls:
        - title: ""
          divs:
            - html: "<p>Pontos arrastáveis na reta. (Sem clamp, então evite cruzar se quiser manter a interpretação de rol.)</p>"
            - html: "$$\\tiny Q_1=\\frac{x_2+x_3}{2},\\quad Q_2=\\frac{x_4+x_5}{2},\\quad Q_3=\\frac{x_6+x_7}{2}$$"
            - html: "<hr>"
            - html: "`$$\\\\tiny Q_1=${calcs.Q1.toFixed(2)}, Q_2=${calcs.Q2.toFixed(2)}, Q_3=${calcs.Q3.toFixed(2)}$$`"
            - html: "`$$\\\\tiny Valores: \\\\{ ${params.x_1.toFixed(1)}, ${params.x_2.toFixed(1)}, ${params.x_3.toFixed(1)}, ${params.x_4.toFixed(1)}, ${params.x_5.toFixed(1)}, ${params.x_6.toFixed(1)}, ${params.x_7.toFixed(1)}, ${params.x_8.toFixed(1)} \\\\} $$`"
