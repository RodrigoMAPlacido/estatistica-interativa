<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <title>{{ page.title }} | Estatística Interativa</title>
  {% include head.html %}
</head>

<body class="textbook loading">

  {% include header.html %}

  <main class="content">
    <h1>{{ page.title }}</h1> <!-- ✅ agora o título aparece -->
    {{ content }}
  </main>

  <div class="nav-links">
    {% if page.anterior %}
      <a class="anterior" href="{{ page.anterior | relative_url }}">← Capítulo Anterior</a>
    {% endif %}
    <a class="sumario" href="{{ '/sumario.html' | relative_url }}">Voltar ao Sumário</a>
    {% if page.proximo %}
      <a class="proximo" href="{{ page.proximo | relative_url }}">Próximo capítulo →</a>
    {% endif %}
  </div>

  {% include footer.html %}
  {% include body.html %}
<!-- Botões de scroll (mobile, discretos) -->
<div class="scroll-buttons" aria-hidden="true">
  <button id="scroll-up" aria-label="Voltar ao topo" title="Topo">↑</button>
  <button id="scroll-down" aria-label="Ir para o fim" title="Fim">↓</button>
</div>
<script>
  (function () {
    const scrollBtns = document.querySelector('.scroll-buttons');
    const btnUp = document.getElementById('scroll-up');
    const btnDown = document.getElementById('scroll-down');

    function toggleButtons() {
      const scrollY = window.scrollY;
      const viewportHeight = window.innerHeight;
      const pageHeight = document.documentElement.scrollHeight;
      const nearBottom = scrollY + viewportHeight >= pageHeight - 120; // margem antes do final

      if (scrollY < 160) {
        // No topo: esconde
        scrollBtns.classList.remove('show');
      } else if (nearBottom) {
        // Perto do rodapé: fade-out
        scrollBtns.classList.remove('show');
      } else {
        // Meio da página: mostra normal
        scrollBtns.classList.add('show');
      }
    }

    // Respeita acessibilidade
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const behavior = prefersReduced ? 'auto' : 'smooth';

    btnUp.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior });
    });

    btnDown.addEventListener('click', () => {
      window.scrollTo({ top: document.documentElement.scrollHeight, behavior });
    });

    // Listener
    toggleButtons();
    window.addEventListener('scroll', toggleButtons, { passive: true });
  })();
</script>
</body>
</html>
