---
schema: EconSchema
aspectRatio: 1

params:
  - name: F_carro
    value: 8
    min: 0
    max: 20
    round: 1
  - name: F_onibus
    value: 6
    min: 0
    max: 20
    round: 1
  - name: F_bicicleta
    value: 4
    min: 0
    max: 20
    round: 1
  - name: F_metro
    value: 2
    min: 0
    max: 20
    round: 1
  - name: theta
    value: 0.78
    min: -6.28
    max: 6.28
    round: 0.01
  - name: theta1
    value: 6
    min: -6.28
    max: 6.28
    round: 0.01
  - name: theta2
    value: 0.5
    min: -6.28
    max: 6.28
    round: 0.01
  - name: theta3
    value: 0.2
    min: -6.28
    max: 6.28
    round: 0.01
calcs:
  total: "(params.F_carro + params.F_onibus + params.F_bicicleta + params.F_metro)"
  fr_carro: "(params.F_carro / calcs.total)"
  fr_onibus: "(params.F_onibus / calcs.total)"
  fr_bicicleta: "(params.F_bicicleta / calcs.total)"
  fr_metro: "(params.F_metro / calcs.total)"

  # coordenadas do ponto móvel sobre a circunferência
  x: "(5 + (3*cos(params.theta)))"
  y: "(5 + (3*sin(params.theta)))"

  x1: "(5 + (3*cos(params.theta1)))"
  y1: "(5 + (3*sin(params.theta1)))"

  x2: "(5 + (3*cos(params.theta2)))"
  y2: "(5 + (3*sin(params.theta2)))"

  x3: "(5 + (3*cos(params.theta3)))"
  y3: "(5 + (3*sin(params.theta3)))"
layout:
  TwoVerticalGraphs:
    topGraph:
      xAxis:
        min: 0
        max: 4.2
        ticks: 0
        label: "Categoria"
      yAxis:
        min: 0
        max: 0.5
        label: "Frequência Absoluta (Fᵢ)"
      objects:
        - Rectangle: 
            x1: 0.2 
            x2: 1.0 
            y1: 0 
            y2: calcs.fr_carro     
            fill: "'#111827'" 
            opacity: 1
        - Rectangle: 
            x1: 1.2 
            x2: 2.0 
            y1: 0 
            y2: calcs.fr_onibus     
            fill: "'#111827'"  
            opacity: 1
        - Rectangle: 
            x1: 2.2 
            x2: 3.0 
            y1: 0 
            y2: calcs.fr_bicicleta   
            fill: "'#111827'"  
            opacity: 1
        - Rectangle: 
            x1: 3.2 
            x2: 4.0 
            y1: 0 
            y2: calcs.fr_metro     
            fill: "'#111827'" 
            opacity: 1
        - Segment:
            a: [0.6, 0]
            b: [0.6, 0]
            color: "'#111827'"
            bgcolor: "'#ffffff'"
            label: 
              text: "'\\\\bf{Carro}'"
              position: t
              fontSize: 7
        - Segment:
            a: [1.6, 0]
            b: [1.6, 0]
            color: "'#111827'"
            bgcolor: "'#ffffff'"
            label: 
              text: "'\\\\bf{Ônibus}'"
              position: t
              fontSize: 7

        - Segment:
            a: [2.6, 0]
            b: [2.6, 0]
            color: "'#111827'"
            bgcolor: "'#ffffff'"
            label: 
              text:  "'\\\\bf{Bicicleta}'"
              position: t
              fontSize: 7

        - Segment:
            a: [3.6, 0]
            b: [3.6, 0]
            color: "'#111827'"
            bgcolor: "'#ffffff'"
            label: 
              text: "'\\\\bf{Metrô}'"
              position: t
              fontSize: 7

    bottomGraph:
      xAxis:
        min: 0
        max: 10
      yAxis:
        min: 0
        max: 10
      objects:
        # círculo base
        - Circle:
            coordinates: [5, 5]
            r: 3
            fill: "#e5e7eb"
            color: "#9ca3af"
            opacity: 0.6

        # raio fixo (do centro até o ponto na borda)
        - Segment:
            a: [5, 5]
            b: [calcs.x, calcs.y]
            color: "#111827"
            strokeWidth: 1.5

        # ponto que se move sobre a curvatura
        - Point:
            coordinates: [calcs.x, calcs.y]
            r: 5
            color: "#1f2937"
            fill: "#1f2937"
            drag:
              - directions: xy
                param: theta
                expression: atan2(drag.y - 5, drag.x - 5)
        - Point:
            coordinates: [calcs.x1, calcs.y1]
            r: 5
            color: "#1f2937"
            fill: "#1f2937"
            drag:
              - directions: xy
                param: theta1
                expression: atan2(drag.y - 5, drag.x - 5)
        - Point:
            coordinates: [calcs.x2, calcs.y2]
            r: 5
            color: "#1f2937"
            fill: "#1f2937"
            drag:
              - directions: xy
                param: theta2
                expression: atan2(drag.y - 5, drag.x - 5)
        - Point:
            coordinates: [calcs.x3, calcs.y3]
            r: 5
            color: "#1f2937"
            fill: "#1f2937"
            drag:
              - directions: xy
                param: theta3
                expression: atan2(drag.y - 5, drag.x - 5)

