<!-- ===========================================
   AMOSTRA ⟵ POPULAÇÃO — padrão unificado (u-*/a-*)
   =========================================== -->
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 820 360" width="820" height="360" role="img" aria-labelledby="title desc" style="background:#ffffff">
  <title id="title">Amostra como subconjunto da população — traçado cíclico sem sobreposição</title>
  <desc id="desc">População fixa em cinza. Caixa “Amostra” com traçado padrão a-draw (sem fade), texto com stroke+fill (a-text) e pontos que entram depois (a-dot), tudo no mesmo ciclo e com as mesmas variáveis globais.</desc>

  <defs>
    <style>
      :root{
        /* paleta e tipografia */
        --ink:#111827;
        --font:"et-book","ETBook","Georgia",serif;

        /* tempo/easing unificados */
        --cycle:8s;
        --ease:ease-in-out;

        /* dash “grande” p/ evitar risquinho fantasma */
        --dash:1400;
        --dashText:900;

        /* população */
        --pop-fill:#B8BEC6;
        --pop-stroke:#8C939C;
        --pop-bg:#FFFFFF;

        /* atrasos em ondas */
        --delay-rect:0s;
        --delay-label:.10s;
        --delay-dots:.70s;
      }

      /* ===== base utilitária: u-* ===== */
      text{ font-family:var(--font); fill:var(--ink); user-select:none; letter-spacing:.13px }
      .u-stroke{ stroke:var(--ink); fill:none; stroke-linecap:round; stroke-linejoin:round }
      .u-box{ stroke-width:3; rx:18 }
      .u-center{ text-anchor:middle }
      .u-bold{ font-weight:700 }
      .u-ns{ vector-effect:non-scaling-stroke }

      /* ===== traçado padrão (tronco/ramos): a-draw ===== */
      @keyframes k-drawLine{
        0%   { stroke-dashoffset:var(--dash); opacity:0; }
        10%  { opacity:1; }
        42%  { stroke-dashoffset:0;          opacity:1; }
        58%  { stroke-dashoffset:0;          opacity:1; }
        90%  { stroke-dashoffset:var(--dash); opacity:1; }
        100% { stroke-dashoffset:var(--dash); opacity:0; }
      }
      .a-draw{
        stroke-dasharray:var(--dash);
        stroke-dashoffset:var(--dash);
        animation:k-drawLine var(--cycle) var(--ease) infinite both;
        animation-delay:var(--delay,0s);
      }

      /* ===== texto com stroke+fill sincronizados: a-text ===== */
      @keyframes k-textStroke{
        0%   { stroke-dashoffset:var(--dashText); opacity:0; }
        10%  { opacity:1; }
        45%  { stroke-dashoffset:0;   opacity:1; }
        55%  { stroke-dashoffset:0;   opacity:1; }
        90%  { stroke-dashoffset:var(--dashText); opacity:1; }
        100% { stroke-dashoffset:var(--dashText); opacity:0; }
      }
      @keyframes k-textFill{
        0%,10%   { fill:transparent; }
        24%,66%  { fill:var(--ink); }
        92%,100% { fill:transparent; }
      }
      .a-text{
        stroke:var(--ink); stroke-width:.9; stroke-linecap:round; stroke-linejoin:round;
        fill:transparent;
        stroke-dasharray:var(--dashText); stroke-dashoffset:var(--dashText);
        animation:
          k-textStroke var(--cycle) var(--ease) infinite both,
          k-textFill   var(--cycle) var(--ease) infinite both;
        animation-delay:var(--delay,0s), var(--delay,0s);
      }

      /* ===== pontos da amostra: a-dot (opacidade + recolor) ===== */
      @keyframes k-dotOpacity{ 0%,15%{opacity:0} 35%,85%{opacity:1} 100%{opacity:0} }
      @keyframes k-dotFill{ 0%,10%{fill:var(--pop-fill)} 24%,66%{fill:var(--ink)} 92%,100%{fill:var(--pop-fill)} }
      .a-dot{
        animation:
          k-dotOpacity var(--cycle) var(--ease) infinite both,
          k-dotFill    var(--cycle) var(--ease) infinite both;
        animation-delay:var(--delay,0s), var(--delay,0s);
      }

      @media (prefers-reduced-motion:reduce){
        .a-draw,.a-text,.a-dot{ animation:none !important; opacity:1 }
        .a-text{ fill:var(--ink); stroke-dashoffset:0 }
      }
    </style>
  </defs>

  <!-- fundo sólido para export estável -->
  <rect x="0" y="0" width="100%" height="100%" fill="#ffffff"/>

  <!-- painel/população -->
  <g id="panel">
    <rect x="40" y="60" width="740" height="240" rx="22"
          fill="var(--pop-bg)" stroke="var(--pop-stroke)" stroke-width="2" class="u-ns"/>
    <text x="60" y="92" font-size="24" class="u-bold" fill="#334155">População</text>

    <!-- pontos da população (estáticos) -->
    <g fill="var(--pop-fill)">
      <circle cx="120" cy="180" r="9"/><circle cx="170" cy="130" r="9"/><circle cx="205" cy="210" r="9"/>
      <circle cx="265" cy="165" r="9"/><circle cx="315" cy="115" r="9"/><circle cx="365" cy="235" r="9"/>
      <circle cx="420" cy="150" r="9"/><circle cx="470" cy="205" r="9"/><circle cx="490" cy="190" r="9"/>
      <circle cx="525" cy="120" r="9"/><circle cx="535" cy="160" r="9"/><circle cx="575" cy="205" r="9"/>
      <circle cx="575" cy="245" r="9"/><circle cx="620" cy="175" r="9"/><circle cx="630" cy="170" r="9"/>
      <circle cx="660" cy="220" r="9"/><circle cx="690" cy="210" r="9"/>
    </g>

    <!-- amostra: caixa (a-draw), rótulo (a-text) e pontos (a-dot) -->
    <rect x="450" y="90" width="260" height="180"
          class="u-stroke u-box a-draw u-ns" style="--delay:var(--delay-rect)"/>

    <text x="590" y="118" font-size="22"
          class="u-center u-bold a-text" style="--delay:var(--delay-label)">Amostra</text>

    <g style="--delay:var(--delay-dots)">
      <circle class="a-dot" cx="470" cy="205" r="9"/>
      <circle class="a-dot" cx="490" cy="190" r="9"/>
      <circle class="a-dot" cx="525" cy="120" r="9"/>
      <circle class="a-dot" cx="535" cy="160" r="9"/>
      <circle class="a-dot" cx="575" cy="205" r="9"/>
      <circle class="a-dot" cx="575" cy="245" r="9"/>
      <circle class="a-dot" cx="620" cy="175" r="9"/>
      <circle class="a-dot" cx="630" cy="170" r="9"/>
      <circle class="a-dot" cx="660" cy="220" r="9"/>
      <circle class="a-dot" cx="690" cy="210" r="9"/>
    </g>
  </g>
</svg>
